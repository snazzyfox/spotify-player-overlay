var app=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function o(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(o)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let c;function l(e,t){return c||(c=document.createElement("a")),c.href=t,e===c.href}function u(t,...n){if(null==t)return e;const o=t.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function d(e){let t;return u(e,(e=>t=e))(),t}function f(e,t,n){e.$$.on_destroy.push(u(t,n))}function p(e,t,n,o){if(e){const s=h(e,t,n,o);return e[0](s)}}function h(e,t,o,s){return e[1]&&s?n(o.ctx.slice(),e[1](s(t))):o.ctx}function m(e,t,n,o){if(e[2]&&o){const s=e[2](o(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let o=0;o<n;o+=1)e[o]=t.dirty[o]|s[o];return e}return t.dirty|s}return t.dirty}function g(e,t,n,o,s,r){if(s){const i=h(t,n,o,r);e.p(i,s)}}function y(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function b(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function v(e,t){const n={};t=new Set(t);for(const o in e)t.has(o)||"$"===o[0]||(n[o]=e[o]);return n}function _(e){return null==e?"":e}function w(e,t,n){return e.set(n),t}const $="undefined"!=typeof window;let k=$?()=>window.performance.now():()=>Date.now(),x=$?e=>requestAnimationFrame(e):e;const C=new Set;function E(e){C.forEach((t=>{t.c(e)||(C.delete(t),t.f())})),0!==C.size&&x(E)}function T(e){let t;return 0===C.size&&x(E),{promise:new Promise((n=>{C.add(t={c:e,f:n})})),abort(){C.delete(t)}}}function S(e,t){e.appendChild(t)}function A(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function O(e){const t=I("style");return function(e,t){S(e.head||e,t)}(A(e),t),t.sheet}function R(e,t,n){e.insertBefore(t,n||null)}function P(e){e.parentNode.removeChild(e)}function I(e){return document.createElement(e)}function j(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function N(){return L(" ")}function D(){return L("")}function U(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function B(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:n[o]&&n[o].set?e[o]=t[o]:M(e,o,t[o])}function F(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:M(e,t,n)}function q(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function H(e,t,n,o){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function J(e,t,n){e.classList[n?"add":"remove"](t)}function G(e,t,{bubbles:n=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,o,t),s}const W=new Map;let V,K=0;function Q(e,t,n,o,s,r,i,a=0){const c=16.666/o;let l="{\n";for(let e=0;e<=1;e+=c){const o=t+(n-t)*r(e);l+=100*e+`%{${i(o,1-o)}}\n`}const u=l+`100% {${i(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=A(e),{stylesheet:p,rules:h}=W.get(f)||function(e,t){const n={stylesheet:O(t),rules:{}};return W.set(e,n),n}(f,e);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${o}ms linear ${s}ms 1 both`,K+=1,d}function Y(e,t){const n=(e.style.animation||"").split(", "),o=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-o.length;s&&(e.style.animation=o.join(", "),K-=s,K||x((()=>{K||(W.forEach((e=>{const{stylesheet:t}=e;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.rules={}})),W.clear())})))}function X(e){V=e}function Z(){if(!V)throw new Error("Function called outside component initialization");return V}function ee(e){Z().$$.on_mount.push(e)}function te(){const e=Z();return(t,n,{cancelable:o=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=G(t,n,{cancelable:o});return s.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}function ne(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const oe=[],se=[],re=[],ie=[],ae=Promise.resolve();let ce=!1;function le(){ce||(ce=!0,ae.then(me))}function ue(e){re.push(e)}function de(e){ie.push(e)}const fe=new Set;let pe,he=0;function me(){const e=V;do{for(;he<oe.length;){const e=oe[he];he++,X(e),ge(e.$$)}for(X(null),oe.length=0,he=0;se.length;)se.pop()();for(let e=0;e<re.length;e+=1){const t=re[e];fe.has(t)||(fe.add(t),t())}re.length=0}while(oe.length);for(;ie.length;)ie.pop()();ce=!1,fe.clear(),X(e)}function ge(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ue)}}function ye(){return pe||(pe=Promise.resolve(),pe.then((()=>{pe=null}))),pe}function be(e,t,n){e.dispatchEvent(G(`${t?"intro":"outro"}${n}`))}const ve=new Set;let _e;function we(){_e={r:0,c:[],p:_e}}function $e(){_e.r||r(_e.c),_e=_e.p}function ke(e,t){e&&e.i&&(ve.delete(e),e.i(t))}function xe(e,t,n,o){if(e&&e.o){if(ve.has(e))return;ve.add(e),_e.c.push((()=>{ve.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}const Ce={duration:0};function Ee(n,o,s,a){let c=o(n,s),l=a?0:1,u=null,d=null,f=null;function p(){f&&Y(n,f)}function h(e,t){const n=e.b-l;return t*=Math.abs(n),{a:l,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function m(o){const{delay:s=0,duration:i=300,easing:a=t,tick:m=e,css:g}=c||Ce,y={start:k()+s,b:o};o||(y.group=_e,_e.r+=1),u||d?d=y:(g&&(p(),f=Q(n,l,o,i,s,a,g)),o&&m(0,1),u=h(y,i),ue((()=>be(n,o,"start"))),T((e=>{if(d&&e>d.start&&(u=h(d,i),d=null,be(n,u.b,"start"),g&&(p(),f=Q(n,l,u.b,u.duration,0,a,c.css))),u)if(e>=u.end)m(l=u.b,1-l),be(n,u.b,"end"),d||(u.b?p():--u.group.r||r(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;l=u.a+u.d*a(t/u.duration),m(l,1-l)}return!(!u&&!d)})))}return{run(e){i(c)?ye().then((()=>{c=c(),m(e)})):m(e)},end(){p(),u=d=null}}}function Te(e,t){const n={},o={},s={$$scope:1};let r=e.length;for(;r--;){const i=e[r],a=t[r];if(a){for(const e in i)e in a||(o[e]=1);for(const e in a)s[e]||(n[e]=a[e],s[e]=1);e[r]=a}else for(const e in i)s[e]=1}for(const e in o)e in n||(n[e]=void 0);return n}function Se(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function Ae(e){e&&e.c()}function Oe(e,t,n,s){const{fragment:a,on_mount:c,on_destroy:l,after_update:u}=e.$$;a&&a.m(t,n),s||ue((()=>{const t=c.map(o).filter(i);l?l.push(...t):r(t),e.$$.on_mount=[]})),u.forEach(ue)}function Re(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Pe(t,n,o,i,a,c,l,u=[-1]){const d=V;X(t);const f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(f.root);let p=!1;if(f.ctx=o?o(t,n.props||{},((e,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),p&&function(e,t){-1===e.$$.dirty[0]&&(oe.push(e),le(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!i&&i(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(P)}else f.fragment&&f.fragment.c();n.intro&&ke(t.$$.fragment),Oe(t,n.target,n.anchor,n.customElement),me()}X(d)}class Ie{$destroy(){Re(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var je="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Le(e){var t={exports:{}};return e(t,t.exports),t.exports}function Ne(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var De=Le((function(e){var t,n,o,s,r,i,a,c,l=(t="https://api.spotify.com/v1",n=null,o=null,s=function(e,t){return e.abort=t,e},r=function(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e.slice(1);return t=t||{},n.forEach((function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})),t},i=function(e,t){var r=new XMLHttpRequest,i=function(o,s){var i=e.type||"GET";if(r.open(i,function(e,t){var n="";for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];n+=encodeURIComponent(o)+"="+encodeURIComponent(s)+"&"}return n.length>0&&(e=e+"?"+(n=n.substring(0,n.length-1))),e}(e.url,e.params)),n&&r.setRequestHeader("Authorization","Bearer "+n),r.onreadystatechange=function(){if(4===r.readyState){var e=null;try{e=r.responseText?JSON.parse(r.responseText):""}catch(e){console.error(e)}r.status>=200&&r.status<300?function(e){o&&o(e),t&&t(null,e)}(e):(s&&s(r),t&&t(r,null))}},"GET"===i)r.send(null);else{var a=null;e.postData&&("image/jpeg"===e.contentType?(a=e.postData,r.setRequestHeader("Content-Type",e.contentType)):(a=JSON.stringify(e.postData),r.setRequestHeader("Content-Type","application/json"))),r.send(a)}};return t?(i(),null):function(e,t){var n;if(null!==o){var r=o.defer();e((function(e){r.resolve(e)}),(function(e){r.reject(e)})),n=r.promise}else window.Promise&&(n=new window.Promise(e));return n?new s(n,t):null}(i,(function(){r.abort()}))},a=function(e,t,n,o){var s={},a=null;return"object"==typeof t?(s=t,a=n):"function"==typeof t&&(a=t),"GET"!==(e.type||"GET")&&e.postData&&!o?e.postData=r(e.postData,s):e.params=r(e.params,s),i(e,a)},((c=function(){}).prototype={constructor:l}).getGeneric=function(e,t){return a({url:e},t)},c.prototype.getMe=function(e,n){return a({url:t+"/me"},e,n)},c.prototype.getMySavedTracks=function(e,n){return a({url:t+"/me/tracks"},e,n)},c.prototype.addToMySavedTracks=function(e,n,o){return a({url:t+"/me/tracks",type:"PUT",postData:e},n,o)},c.prototype.removeFromMySavedTracks=function(e,n,o){return a({url:t+"/me/tracks",type:"DELETE",postData:e},n,o)},c.prototype.containsMySavedTracks=function(e,n,o){var s={url:t+"/me/tracks/contains",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getMySavedAlbums=function(e,n){return a({url:t+"/me/albums"},e,n)},c.prototype.addToMySavedAlbums=function(e,n,o){return a({url:t+"/me/albums",type:"PUT",postData:e},n,o)},c.prototype.removeFromMySavedAlbums=function(e,n,o){return a({url:t+"/me/albums",type:"DELETE",postData:e},n,o)},c.prototype.containsMySavedAlbums=function(e,n,o){var s={url:t+"/me/albums/contains",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getMyTopArtists=function(e,n){return a({url:t+"/me/top/artists"},e,n)},c.prototype.getMyTopTracks=function(e,n){return a({url:t+"/me/top/tracks"},e,n)},c.prototype.getMyRecentlyPlayedTracks=function(e,n){return a({url:t+"/me/player/recently-played"},e,n)},c.prototype.followUsers=function(e,n){var o={url:t+"/me/following/",type:"PUT",params:{ids:e.join(","),type:"user"}};return a(o,n)},c.prototype.followArtists=function(e,n){var o={url:t+"/me/following/",type:"PUT",params:{ids:e.join(","),type:"artist"}};return a(o,n)},c.prototype.followPlaylist=function(e,n,o){return a({url:t+"/playlists/"+e+"/followers",type:"PUT",postData:{}},n,o)},c.prototype.unfollowUsers=function(e,n){var o={url:t+"/me/following/",type:"DELETE",params:{ids:e.join(","),type:"user"}};return a(o,n)},c.prototype.unfollowArtists=function(e,n){var o={url:t+"/me/following/",type:"DELETE",params:{ids:e.join(","),type:"artist"}};return a(o,n)},c.prototype.unfollowPlaylist=function(e,n){return a({url:t+"/playlists/"+e+"/followers",type:"DELETE"},n)},c.prototype.isFollowingUsers=function(e,n){var o={url:t+"/me/following/contains",type:"GET",params:{ids:e.join(","),type:"user"}};return a(o,n)},c.prototype.isFollowingArtists=function(e,n){var o={url:t+"/me/following/contains",type:"GET",params:{ids:e.join(","),type:"artist"}};return a(o,n)},c.prototype.areFollowingPlaylist=function(e,n,o){var s={url:t+"/playlists/"+e+"/followers/contains",type:"GET",params:{ids:n.join(",")}};return a(s,o)},c.prototype.getFollowedArtists=function(e,n){return a({url:t+"/me/following",type:"GET",params:{type:"artist"}},e,n)},c.prototype.getUser=function(e,n,o){var s={url:t+"/users/"+encodeURIComponent(e)};return a(s,n,o)},c.prototype.getUserPlaylists=function(e,n,o){var s;return"string"==typeof e?s={url:t+"/users/"+encodeURIComponent(e)+"/playlists"}:(s={url:t+"/me/playlists"},o=n,n=e),a(s,n,o)},c.prototype.getPlaylist=function(e,n,o){return a({url:t+"/playlists/"+e},n,o)},c.prototype.getPlaylistTracks=function(e,n,o){return a({url:t+"/playlists/"+e+"/tracks"},n,o)},c.prototype.getPlaylistCoverImage=function(e,n){return a({url:t+"/playlists/"+e+"/images"},n)},c.prototype.createPlaylist=function(e,n,o){var s={url:t+"/users/"+encodeURIComponent(e)+"/playlists",type:"POST",postData:n};return a(s,n,o)},c.prototype.changePlaylistDetails=function(e,n,o){return a({url:t+"/playlists/"+e,type:"PUT",postData:n},n,o)},c.prototype.addTracksToPlaylist=function(e,n,o,s){return a({url:t+"/playlists/"+e+"/tracks",type:"POST",postData:{uris:n}},o,s,!0)},c.prototype.replaceTracksInPlaylist=function(e,n,o){return a({url:t+"/playlists/"+e+"/tracks",type:"PUT",postData:{uris:n}},{},o)},c.prototype.reorderTracksInPlaylist=function(e,n,o,s,r){return a({url:t+"/playlists/"+e+"/tracks",type:"PUT",postData:{range_start:n,insert_before:o}},s,r)},c.prototype.removeTracksFromPlaylist=function(e,n,o){var s=n.map((function(e){return"string"==typeof e?{uri:e}:e}));return a({url:t+"/playlists/"+e+"/tracks",type:"DELETE",postData:{tracks:s}},{},o)},c.prototype.removeTracksFromPlaylistWithSnapshotId=function(e,n,o,s){var r=n.map((function(e){return"string"==typeof e?{uri:e}:e}));return a({url:t+"/playlists/"+e+"/tracks",type:"DELETE",postData:{tracks:r,snapshot_id:o}},{},s)},c.prototype.removeTracksFromPlaylistInPositions=function(e,n,o,s){return a({url:t+"/playlists/"+e+"/tracks",type:"DELETE",postData:{positions:n,snapshot_id:o}},{},s)},c.prototype.uploadCustomPlaylistCoverImage=function(e,n,o){var s={url:t+"/playlists/"+e+"/images",type:"PUT",postData:n.replace(/^data:image\/jpeg;base64,/,""),contentType:"image/jpeg"};return a(s,{},o)},c.prototype.getAlbum=function(e,n,o){return a({url:t+"/albums/"+e},n,o)},c.prototype.getAlbumTracks=function(e,n,o){return a({url:t+"/albums/"+e+"/tracks"},n,o)},c.prototype.getAlbums=function(e,n,o){var s={url:t+"/albums/",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getTrack=function(e,n,o){var s={};return s.url=t+"/tracks/"+e,a(s,n,o)},c.prototype.getTracks=function(e,n,o){var s={url:t+"/tracks/",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getArtist=function(e,n,o){return a({url:t+"/artists/"+e},n,o)},c.prototype.getArtists=function(e,n,o){var s={url:t+"/artists/",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getArtistAlbums=function(e,n,o){return a({url:t+"/artists/"+e+"/albums"},n,o)},c.prototype.getArtistTopTracks=function(e,n,o,s){return a({url:t+"/artists/"+e+"/top-tracks",params:{country:n}},o,s)},c.prototype.getArtistRelatedArtists=function(e,n,o){return a({url:t+"/artists/"+e+"/related-artists"},n,o)},c.prototype.getFeaturedPlaylists=function(e,n){return a({url:t+"/browse/featured-playlists"},e,n)},c.prototype.getNewReleases=function(e,n){return a({url:t+"/browse/new-releases"},e,n)},c.prototype.getCategories=function(e,n){return a({url:t+"/browse/categories"},e,n)},c.prototype.getCategory=function(e,n,o){return a({url:t+"/browse/categories/"+e},n,o)},c.prototype.getCategoryPlaylists=function(e,n,o){return a({url:t+"/browse/categories/"+e+"/playlists"},n,o)},c.prototype.search=function(e,n,o,s){var r={url:t+"/search/",params:{q:e,type:n.join(",")}};return a(r,o,s)},c.prototype.searchAlbums=function(e,t,n){return this.search(e,["album"],t,n)},c.prototype.searchArtists=function(e,t,n){return this.search(e,["artist"],t,n)},c.prototype.searchTracks=function(e,t,n){return this.search(e,["track"],t,n)},c.prototype.searchPlaylists=function(e,t,n){return this.search(e,["playlist"],t,n)},c.prototype.searchShows=function(e,t,n){return this.search(e,["show"],t,n)},c.prototype.searchEpisodes=function(e,t,n){return this.search(e,["episode"],t,n)},c.prototype.getAudioFeaturesForTrack=function(e,n){var o={};return o.url=t+"/audio-features/"+e,a(o,{},n)},c.prototype.getAudioFeaturesForTracks=function(e,n){return a({url:t+"/audio-features",params:{ids:e}},{},n)},c.prototype.getAudioAnalysisForTrack=function(e,n){var o={};return o.url=t+"/audio-analysis/"+e,a(o,{},n)},c.prototype.getRecommendations=function(e,n){return a({url:t+"/recommendations"},e,n)},c.prototype.getAvailableGenreSeeds=function(e){return a({url:t+"/recommendations/available-genre-seeds"},{},e)},c.prototype.getMyDevices=function(e){return a({url:t+"/me/player/devices"},{},e)},c.prototype.getMyCurrentPlaybackState=function(e,n){return a({url:t+"/me/player"},e,n)},c.prototype.getMyCurrentPlayingTrack=function(e,n){return a({url:t+"/me/player/currently-playing"},e,n)},c.prototype.transferMyPlayback=function(e,n,o){var s=n||{};return s.device_ids=e,a({type:"PUT",url:t+"/me/player",postData:s},n,o)},c.prototype.play=function(e,n){var o="device_id"in(e=e||{})?{device_id:e.device_id}:null,s={};return["context_uri","uris","offset","position_ms"].forEach((function(t){t in e&&(s[t]=e[t])})),a({type:"PUT",url:t+"/me/player/play",params:o,postData:s},"function"==typeof e?e:{},n)},c.prototype.queue=function(e,n,o){var s="device_id"in(n=n||{})?{uri:e,device_id:n.device_id}:{uri:e};return a({type:"POST",url:t+"/me/player/queue",params:s},n,o)},c.prototype.pause=function(e,n){var o="device_id"in(e=e||{})?{device_id:e.device_id}:null;return a({type:"PUT",url:t+"/me/player/pause",params:o},e,n)},c.prototype.skipToNext=function(e,n){var o="device_id"in(e=e||{})?{device_id:e.device_id}:null;return a({type:"POST",url:t+"/me/player/next",params:o},e,n)},c.prototype.skipToPrevious=function(e,n){var o="device_id"in(e=e||{})?{device_id:e.device_id}:null;return a({type:"POST",url:t+"/me/player/previous",params:o},e,n)},c.prototype.seek=function(e,n,o){var s={position_ms:e};return"device_id"in(n=n||{})&&(s.device_id=n.device_id),a({type:"PUT",url:t+"/me/player/seek",params:s},n,o)},c.prototype.setRepeat=function(e,n,o){var s={state:e};return"device_id"in(n=n||{})&&(s.device_id=n.device_id),a({type:"PUT",url:t+"/me/player/repeat",params:s},n,o)},c.prototype.setVolume=function(e,n,o){var s={volume_percent:e};return"device_id"in(n=n||{})&&(s.device_id=n.device_id),a({type:"PUT",url:t+"/me/player/volume",params:s},n,o)},c.prototype.setShuffle=function(e,n,o){var s={state:e};return"device_id"in(n=n||{})&&(s.device_id=n.device_id),a({type:"PUT",url:t+"/me/player/shuffle",params:s},n,o)},c.prototype.getShow=function(e,n,o){var s={};return s.url=t+"/shows/"+e,a(s,n,o)},c.prototype.getShows=function(e,n,o){var s={url:t+"/shows/",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getMySavedShows=function(e,n){return a({url:t+"/me/shows"},e,n)},c.prototype.addToMySavedShows=function(e,n,o){return a({url:t+"/me/shows",type:"PUT",postData:e},n,o)},c.prototype.removeFromMySavedShows=function(e,n,o){return a({url:t+"/me/shows",type:"DELETE",postData:e},n,o)},c.prototype.containsMySavedShows=function(e,n,o){var s={url:t+"/me/shows/contains",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getShowEpisodes=function(e,n,o){return a({url:t+"/shows/"+e+"/episodes"},n,o)},c.prototype.getEpisode=function(e,n,o){var s={};return s.url=t+"/episodes/"+e,a(s,n,o)},c.prototype.getEpisodes=function(e,n,o){var s={url:t+"/episodes/",params:{ids:e.join(",")}};return a(s,n,o)},c.prototype.getAccessToken=function(){return n},c.prototype.setAccessToken=function(e){n=e},c.prototype.setPromiseImplementation=function(e){var t=!1;try{var n=new e((function(e){e()}));"function"==typeof n.then&&"function"==typeof n.catch&&(t=!0)}catch(e){console.error(e)}if(!t)throw new Error("Unsupported implementation of Promises/A+");o=e},c);e.exports=l}));const Ue=[];function Me(t,n=e){let o;const s=new Set;function r(e){if(a(t,e)&&(t=e,o)){const e=!Ue.length;for(const e of s)e[1](),Ue.push(e,t);if(e){for(let e=0;e<Ue.length;e+=2)Ue[e][0](Ue[e+1]);Ue.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(i,a=e){const c=[i,a];return s.add(c),1===s.size&&(o=n(r)||e),i(t),()=>{s.delete(c),0===s.size&&(o(),o=null)}}}}function Be(t,n,o){const s=!Array.isArray(t),a=s?[t]:t,c=n.length<2;return l=t=>{let o=!1;const l=[];let d=0,f=e;const p=()=>{if(d)return;f();const o=n(s?l[0]:l,t);c?t(o):f=i(o)?o:e},h=a.map(((e,t)=>u(e,(e=>{l[t]=e,d&=~(1<<t),o&&p()}),(()=>{d|=1<<t}))));return o=!0,p(),function(){r(h),f()}},{subscribe:Me(o,l).subscribe};var l}var Fe=Le((function(e){var t=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function s(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var r={compressToBase64:function(e){if(null==e)return"";var n=r._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:r._decompress(e.length,32,(function(n){return s(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":r._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:r._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=r.compress(e),n=new Uint8Array(2*t.length),o=0,s=t.length;o<s;o++){var i=t.charCodeAt(o);n[2*o]=i>>>8,n[2*o+1]=i%256}return n},decompressFromUint8Array:function(t){if(null==t)return r.decompress(t);for(var n=new Array(t.length/2),o=0,s=n.length;o<s;o++)n[o]=256*t[2*o]+t[2*o+1];var i=[];return n.forEach((function(t){i.push(e(t))})),r.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),r._decompress(e.length,32,(function(t){return s(n,e.charAt(t))})))},compress:function(t){return r._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var o,s,r,i={},a={},c="",l="",u="",d=2,f=3,p=2,h=[],m=0,g=0;for(r=0;r<e.length;r+=1)if(c=e.charAt(r),Object.prototype.hasOwnProperty.call(i,c)||(i[c]=f++,a[c]=!0),l=u+c,Object.prototype.hasOwnProperty.call(i,l))u=l;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(o=0;o<p;o++)m<<=1,g==t-1?(g=0,h.push(n(m)),m=0):g++;for(s=u.charCodeAt(0),o=0;o<8;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1}else{for(s=1,o=0;o<p;o++)m=m<<1|s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s=0;for(s=u.charCodeAt(0),o=0;o<16;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1}0==--d&&(d=Math.pow(2,p),p++),delete a[u]}else for(s=i[u],o=0;o<p;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1;0==--d&&(d=Math.pow(2,p),p++),i[l]=f++,u=String(c)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(o=0;o<p;o++)m<<=1,g==t-1?(g=0,h.push(n(m)),m=0):g++;for(s=u.charCodeAt(0),o=0;o<8;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1}else{for(s=1,o=0;o<p;o++)m=m<<1|s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s=0;for(s=u.charCodeAt(0),o=0;o<16;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1}0==--d&&(d=Math.pow(2,p),p++),delete a[u]}else for(s=i[u],o=0;o<p;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(s=2,o=0;o<p;o++)m=m<<1|1&s,g==t-1?(g=0,h.push(n(m)),m=0):g++,s>>=1;for(;;){if(m<<=1,g==t-1){h.push(n(m));break}g++}return h.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,o){var s,r,i,a,c,l,u,d=[],f=4,p=4,h=3,m="",g=[],y={val:o(0),position:n,index:1};for(s=0;s<3;s+=1)d[s]=s;for(i=0,c=Math.pow(2,2),l=1;l!=c;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),i|=(a>0?1:0)*l,l<<=1;switch(i){case 0:for(i=0,c=Math.pow(2,8),l=1;l!=c;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),i|=(a>0?1:0)*l,l<<=1;u=e(i);break;case 1:for(i=0,c=Math.pow(2,16),l=1;l!=c;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),i|=(a>0?1:0)*l,l<<=1;u=e(i);break;case 2:return""}for(d[3]=u,r=u,g.push(u);;){if(y.index>t)return"";for(i=0,c=Math.pow(2,h),l=1;l!=c;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),i|=(a>0?1:0)*l,l<<=1;switch(u=i){case 0:for(i=0,c=Math.pow(2,8),l=1;l!=c;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),i|=(a>0?1:0)*l,l<<=1;d[p++]=e(i),u=p-1,f--;break;case 1:for(i=0,c=Math.pow(2,16),l=1;l!=c;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=o(y.index++)),i|=(a>0?1:0)*l,l<<=1;d[p++]=e(i),u=p-1,f--;break;case 2:return g.join("")}if(0==f&&(f=Math.pow(2,h),h++),d[u])m=d[u];else{if(u!==p)return null;m=r+r.charAt(0)}g.push(m),d[p++]=r+m.charAt(0),r=m,0==--f&&(f=Math.pow(2,h),h++)}}};return r}();null!=e&&(e.exports=t)}));const qe=[];function ze(e){try{return JSON.parse(e)}catch(e){return null}}function He(e){const t=Me(ze(localStorage.getItem(e)));return t.subscribe((t=>{null!==t?localStorage.setItem(e,JSON.stringify(t)):localStorage.removeItem(e)})),window.addEventListener("storage",(n=>{null===n.key?t.set(null):n.key===e&&n.oldValue!==n.newValue&&t.set(ze(n.newValue))})),qe.push(e),t}const Je=He("SPOTIFY_CLIENT_ID"),Ge=He("SPOTIFY_TOKEN"),We=He("SPOTIFY_AUTH_STATE"),Ve=He("SPOTIFY_AUTH_CODE"),Ke=He("SPOTIFY_CODE_VERIFIER"),Qe=He("SPOTIFY_AUTH_TOKEN_EXPIRES"),Ye=He("SPOTIFY_REFRESH_TOKEN"),Xe=He("TWITCH_AUTH_TOKEN"),Ze=He("TWITCH_AUTH_STATE"),et=He("TWITCH_LISTEN_CHANNEL"),tt=He("TWITCH_COMMAND"),nt=Be(Ge,(e=>null!==e)),ot=Be(Xe,(e=>null!==e));var st,rt=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}},it=Object.prototype.toString,at=(st=Object.create(null),function(e){var t=it.call(e);return st[t]||(st[t]=t.slice(8,-1).toLowerCase())});function ct(e){return e=e.toLowerCase(),function(t){return at(t)===e}}function lt(e){return Array.isArray(e)}function ut(e){return void 0===e}var dt=ct("ArrayBuffer");function ft(e){return null!==e&&"object"==typeof e}function pt(e){if("object"!==at(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var ht=ct("Date"),mt=ct("File"),gt=ct("Blob"),yt=ct("FileList");function bt(e){return"[object Function]"===it.call(e)}var vt=ct("URLSearchParams");function _t(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),lt(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.call(null,e[s],s,e)}var wt,$t=(wt="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return wt&&e instanceof wt}),kt={isArray:lt,isArrayBuffer:dt,isBuffer:function(e){return null!==e&&!ut(e)&&null!==e.constructor&&!ut(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||it.call(e)===t||bt(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&dt(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:ft,isPlainObject:pt,isUndefined:ut,isDate:ht,isFile:mt,isBlob:gt,isFunction:bt,isStream:function(e){return ft(e)&&bt(e.pipe)},isURLSearchParams:vt,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:_t,merge:function e(){var t={};function n(n,o){pt(t[o])&&pt(n)?t[o]=e(t[o],n):pt(n)?t[o]=e({},n):lt(n)?t[o]=n.slice():t[o]=n}for(var o=0,s=arguments.length;o<s;o++)_t(arguments[o],n);return t},extend:function(e,t,n){return _t(t,(function(t,o){e[o]=n&&"function"==typeof t?rt(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,o){e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var o,s,r,i={};t=t||{};do{for(s=(o=Object.getOwnPropertyNames(e)).length;s-- >0;)i[r=o[s]]||(t[r]=e[r],i[r]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:at,kindOfTest:ct,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var o=e.indexOf(t,n);return-1!==o&&o===n},toArray:function(e){if(!e)return null;var t=e.length;if(ut(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:$t,isFileList:yt};function xt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ct=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(kt.isURLSearchParams(t))o=t.toString();else{var s=[];kt.forEach(t,(function(e,t){null!=e&&(kt.isArray(e)?t+="[]":e=[e],kt.forEach(e,(function(e){kt.isDate(e)?e=e.toISOString():kt.isObject(e)&&(e=JSON.stringify(e)),s.push(xt(t)+"="+xt(e))})))})),o=s.join("&")}if(o){var r=e.indexOf("#");-1!==r&&(e=e.slice(0,r)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e};function Et(){this.handlers=[]}Et.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},Et.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Et.prototype.forEach=function(e){kt.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Tt=Et,St=function(e,t){kt.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))};function At(e,t,n,o,s){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s)}kt.inherits(At,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Ot=At.prototype,Rt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){Rt[e]={value:e}})),Object.defineProperties(At,Rt),Object.defineProperty(Ot,"isAxiosError",{value:!0}),At.from=function(e,t,n,o,s,r){var i=Object.create(Ot);return kt.toFlatObject(e,i,(function(e){return e!==Error.prototype})),At.call(i,e.message,t,n,o,s),i.name=e.name,r&&Object.assign(i,r),i};var Pt=At,It={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var jt=function(e,t){t=t||new FormData;var n=[];function o(e){return null===e?"":kt.isDate(e)?e.toISOString():kt.isArrayBuffer(e)||kt.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(s,r){if(kt.isPlainObject(s)||kt.isArray(s)){if(-1!==n.indexOf(s))throw Error("Circular reference detected in "+r);n.push(s),kt.forEach(s,(function(n,s){if(!kt.isUndefined(n)){var i,a=r?r+"."+s:s;if(n&&!r&&"object"==typeof n)if(kt.endsWith(s,"{}"))n=JSON.stringify(n);else if(kt.endsWith(s,"[]")&&(i=kt.toArray(n)))return void i.forEach((function(e){!kt.isUndefined(e)&&t.append(a,o(e))}));e(n,a)}})),n.pop()}else t.append(r,o(s))}(e),t},Lt=kt.isStandardBrowserEnv()?{write:function(e,t,n,o,s,r){var i=[];i.push(e+"="+encodeURIComponent(t)),kt.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),kt.isString(o)&&i.push("path="+o),kt.isString(s)&&i.push("domain="+s),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Nt=function(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t},Dt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ut=kt.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=kt.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};function Mt(e){Pt.call(this,null==e?"canceled":e,Pt.ERR_CANCELED),this.name="CanceledError"}kt.inherits(Mt,Pt,{__CANCEL__:!0});var Bt=Mt,Ft=function(e){return new Promise((function(t,n){var o,s=e.data,r=e.headers,i=e.responseType;function a(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}kt.isFormData(s)&&kt.isStandardBrowserEnv()&&delete r["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var l=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.Authorization="Basic "+btoa(l+":"+u)}var d=Nt(e.baseURL,e.url);function f(){if(c){var o,s,r,l,u,d="getAllResponseHeaders"in c?(o=c.getAllResponseHeaders(),u={},o?(kt.forEach(o.split("\n"),(function(e){if(l=e.indexOf(":"),s=kt.trim(e.substr(0,l)).toLowerCase(),r=kt.trim(e.substr(l+1)),s){if(u[s]&&Dt.indexOf(s)>=0)return;u[s]="set-cookie"===s?(u[s]?u[s]:[]).concat([r]):u[s]?u[s]+", "+r:r}})),u):u):null;!function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new Pt("Request failed with status code "+n.status,[Pt.ERR_BAD_REQUEST,Pt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),a()}),(function(e){n(e),a()}),{data:i&&"text"!==i&&"json"!==i?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:d,config:e,request:c}),c=null}}if(c.open(e.method.toUpperCase(),Ct(d,e.params,e.paramsSerializer),!0),c.timeout=e.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(n(new Pt("Request aborted",Pt.ECONNABORTED,e,c)),c=null)},c.onerror=function(){n(new Pt("Network Error",Pt.ERR_NETWORK,e,c,c)),c=null},c.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",o=e.transitional||It;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Pt(t,o.clarifyTimeoutError?Pt.ETIMEDOUT:Pt.ECONNABORTED,e,c)),c=null},kt.isStandardBrowserEnv()){var p=(e.withCredentials||Ut(d))&&e.xsrfCookieName?Lt.read(e.xsrfCookieName):void 0;p&&(r[e.xsrfHeaderName]=p)}"setRequestHeader"in c&&kt.forEach(r,(function(e,t){void 0===s&&"content-type"===t.toLowerCase()?delete r[t]:c.setRequestHeader(t,e)})),kt.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),i&&"json"!==i&&(c.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&c.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(o=function(e){c&&(n(!e||e&&e.type?new Bt:e),c.abort(),c=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o))),s||(s=null);var h,m=(h=/^([-+\w]{1,25})(:?\/\/|:)/.exec(d))&&h[1]||"";m&&-1===["http","https","file"].indexOf(m)?n(new Pt("Unsupported protocol "+m+":",Pt.ERR_BAD_REQUEST,e)):c.send(s)}))},qt={"Content-Type":"application/x-www-form-urlencoded"};function zt(e,t){!kt.isUndefined(e)&&kt.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var Ht,Jt={transitional:It,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(Ht=Ft),Ht),transformRequest:[function(e,t){if(St(t,"Accept"),St(t,"Content-Type"),kt.isFormData(e)||kt.isArrayBuffer(e)||kt.isBuffer(e)||kt.isStream(e)||kt.isFile(e)||kt.isBlob(e))return e;if(kt.isArrayBufferView(e))return e.buffer;if(kt.isURLSearchParams(e))return zt(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,o=kt.isObject(e),s=t&&t["Content-Type"];if((n=kt.isFileList(e))||o&&"multipart/form-data"===s){var r=this.env&&this.env.FormData;return jt(n?{"files[]":e}:e,r&&new r)}return o||"application/json"===s?(zt(t,"application/json"),function(e,t,n){if(kt.isString(e))try{return(t||JSON.parse)(e),kt.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Jt.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||o&&kt.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw Pt.from(e,Pt.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:null},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};kt.forEach(["delete","get","head"],(function(e){Jt.headers[e]={}})),kt.forEach(["post","put","patch"],(function(e){Jt.headers[e]=kt.merge(qt)}));var Gt=Jt,Wt=function(e,t,n){var o=this||Gt;return kt.forEach(n,(function(n){e=n.call(o,e,t)})),e},Vt=function(e){return!(!e||!e.__CANCEL__)};function Kt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bt}var Qt=function(e){return Kt(e),e.headers=e.headers||{},e.data=Wt.call(e,e.data,e.headers,e.transformRequest),e.headers=kt.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),kt.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Gt.adapter)(e).then((function(t){return Kt(e),t.data=Wt.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return Vt(t)||(Kt(e),t&&t.response&&(t.response.data=Wt.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},Yt=function(e,t){t=t||{};var n={};function o(e,t){return kt.isPlainObject(e)&&kt.isPlainObject(t)?kt.merge(e,t):kt.isPlainObject(t)?kt.merge({},t):kt.isArray(t)?t.slice():t}function s(n){return kt.isUndefined(t[n])?kt.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function r(e){if(!kt.isUndefined(t[e]))return o(void 0,t[e])}function i(n){return kt.isUndefined(t[n])?kt.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function a(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var c={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a};return kt.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,o=t(e);kt.isUndefined(o)&&t!==a||(n[e]=o)})),n},Xt="0.27.2",Zt=Xt,en={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){en[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var tn={};en.transitional=function(e,t,n){function o(e,t){return"[Axios v"+Zt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,s,r){if(!1===e)throw new Pt(o(s," has been removed"+(t?" in "+t:"")),Pt.ERR_DEPRECATED);return t&&!tn[s]&&(tn[s]=!0,console.warn(o(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,r)}};var nn={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Pt("options must be an object",Pt.ERR_BAD_OPTION_VALUE);for(var o=Object.keys(e),s=o.length;s-- >0;){var r=o[s],i=t[r];if(i){var a=e[r],c=void 0===a||i(a,r,e);if(!0!==c)throw new Pt("option "+r+" must be "+c,Pt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Pt("Unknown option "+r,Pt.ERR_BAD_OPTION)}},validators:en},on=nn.validators;function sn(e){this.defaults=e,this.interceptors={request:new Tt,response:new Tt}}sn.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=Yt(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&nn.assertOptions(n,{silentJSONParsing:on.transitional(on.boolean),forcedJSONParsing:on.transitional(on.boolean),clarifyTimeoutError:on.transitional(on.boolean)},!1);var o=[],s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));var r,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!s){var a=[Qt,void 0];for(Array.prototype.unshift.apply(a,o),a=a.concat(i),r=Promise.resolve(t);a.length;)r=r.then(a.shift(),a.shift());return r}for(var c=t;o.length;){var l=o.shift(),u=o.shift();try{c=l(c)}catch(e){u(e);break}}try{r=Qt(c)}catch(e){return Promise.reject(e)}for(;i.length;)r=r.then(i.shift(),i.shift());return r},sn.prototype.getUri=function(e){e=Yt(this.defaults,e);var t=Nt(e.baseURL,e.url);return Ct(t,e.params,e.paramsSerializer)},kt.forEach(["delete","get","head","options"],(function(e){sn.prototype[e]=function(t,n){return this.request(Yt(n||{},{method:e,url:t,data:(n||{}).data}))}})),kt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,o,s){return this.request(Yt(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:o}))}}sn.prototype[e]=t(),sn.prototype[e+"Form"]=t(!0)}));var rn=sn;function an(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,o=n._listeners.length;for(t=0;t<o;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,o=new Promise((function(e){n.subscribe(e),t=e})).then(e);return o.cancel=function(){n.unsubscribe(t)},o},e((function(e){n.reason||(n.reason=new Bt(e),t(n.reason))}))}an.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},an.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},an.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},an.source=function(){var e;return{token:new an((function(t){e=t})),cancel:e}};var cn=an;var ln=function e(t){var n=new rn(t),o=rt(rn.prototype.request,n);return kt.extend(o,rn.prototype,n),kt.extend(o,n),o.create=function(n){return e(Yt(t,n))},o}(Gt);ln.Axios=rn,ln.CanceledError=Bt,ln.CancelToken=cn,ln.isCancel=Vt,ln.VERSION=Xt,ln.toFormData=jt,ln.AxiosError=Pt,ln.Cancel=ln.CanceledError,ln.all=function(e){return Promise.all(e)},ln.spread=function(e){return function(t){return e.apply(null,t)}},ln.isAxiosError=function(e){return kt.isObject(e)&&!0===e.isAxiosError};var un=ln,dn=ln;un.default=dn;var fn=un;const pn=location.origin+location.pathname+"#spotify";async function hn(){if(!d(Je))throw"No client ID was provided.";const e=function(e){const t=new Uint8Array((e||40)/2);return crypto.getRandomValues(t),Array.from(t,(e=>e.toString(16))).join("")}(72),t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode.apply(null,new Uint8Array(n))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(e),n=(1e24*Math.random()).toString(36);Ge.set(null),Qe.set(null),Ve.set(null),We.set(n),Ke.set(e);const o="https://accounts.spotify.com/authorize?"+new URLSearchParams({response_type:"code",client_id:d(Je),scope:"user-read-playback-position user-read-playback-state user-read-currently-playing",redirect_uri:pn,state:n,code_challenge_method:"S256",code_challenge:t,show_dialog:"false"}).toString();window.open(o,"_blank","popup,innerWidth=600,innerHeight=800")}async function mn(e){const t=new URLSearchParams(e),n=await fn.post("https://accounts.spotify.com/api/token",t);Ge.set(n.data.access_token),n.data.refresh_token&&Ye.set(n.data.refresh_token),Qe.set((new Date).getTime()+1e3*n.data.expires_in-1e4),setTimeout(gn,1e3*n.data.expires_in-1e4)}async function gn(){if(d(Ye))try{await mn({grant_type:"refresh_token",refresh_token:d(Ye),client_id:d(Je)})}catch(e){console.error(e),await yn()}}async function yn(){await mn({grant_type:"authorization_code",code:d(Ve),redirect_uri:pn,client_id:d(Je),code_verifier:d(Ke)})}function bn(){Ve.set(null),Ge.set(null),Ke.set(null),Ye.set(null)}let vn=!1;const _n=new De;function wn(e,{delay:n=0,duration:o=400,easing:s=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:o,easing:s,css:e=>"opacity: "+e*r}}function $n(e,{duration:t=2e3,pixels:n=100}){let o=e.offsetTop-parseFloat(getComputedStyle(e).marginTop),s=e.offsetLeft;return{duration:t,css:(e,t)=>`position:absolute;top:${o}px;left:${s}px;opacity:${e};transform:translateX(-${Math.floor(n*t)}px)`}}function kn(e,{duration:t=2e3,pixels:n=100}){return{duration:t,css:(e,t)=>`transform:translateX(${Math.floor(n*t)}px);opacity:${e}`}}function xn(e){let t,n,o;const s=e[3].default,r=p(s,e,e[2],null);return{c(){t=I("div"),n=I("div"),r&&r.c(),M(n,"class","marquee-text svelte-6nmbu9"),H(n,"left","calc(var(--text-fade-width) + "+e[1]+"%)"),M(t,"class","marquee-mask svelte-6nmbu9")},m(s,i){R(s,t,i),S(t,n),r&&r.m(n,null),e[4](n),o=!0},p(e,[t]){r&&r.p&&(!o||4&t)&&g(r,s,e,e[2],o?m(s,e[2],t,null):y(e[2]),null),(!o||2&t)&&H(n,"left","calc(var(--text-fade-width) + "+e[1]+"%)")},i(e){o||(ke(r,e),o=!0)},o(e){xe(r,e),o=!1},d(n){n&&P(t),r&&r.d(n),e[4](null)}}}Ge.subscribe((e=>{_n.setAccessToken(e),vn=!0}));let Cn=0;function En(e,t,n){let o,{$$slots:s={},$$scope:r}=t,i=0,a=!1;function c(){o&&o.parentElement?o.offsetWidth<o.parentElement.offsetWidth?(a&&(Cn-=1,a=!1),n(1,i=0),requestAnimationFrame(c)):o.offsetLeft+o.offsetWidth<0?(a&&(Cn-=1,a=!1),Cn<=0&&n(1,i=100),requestAnimationFrame(c)):Math.abs(i)<.01?setTimeout((()=>{Cn+=1,a=!0,n(1,i-=.25),requestAnimationFrame(c)}),2e3):(n(1,i-=.25),requestAnimationFrame(c)):requestAnimationFrame(c)}return ee((()=>{setTimeout(c,2e3)})),e.$$set=e=>{"$$scope"in e&&n(2,r=e.$$scope)},[o,i,r,s,function(e){se[e?"unshift":"push"]((()=>{o=e,n(0,o)}))}]}class Tn extends Ie{constructor(e){super(),Pe(this,e,En,xn,a,{})}}const Sn=location.origin+location.pathname+"#twitch",An="8qfupphh47by5drg44h6vq9teo506g";async function On(){const e=(1e24*Math.random()).toString(36);Xe.set(null),Ze.set(e);const t="https://id.twitch.tv/oauth2/authorize?"+new URLSearchParams({response_type:"token",client_id:An,scope:"chat:edit chat:read",redirect_uri:Sn,state:e,force_verify:"false"}).toString();window.open(t,"_blank","popup,innerWidth=600,innerHeight=800")}function Rn(){Xe.set(null)}const Pn=fn.create({baseURL:"https://api.twitch.tv/helix",headers:{"Client-Id":An}});async function In(e){return(await Pn.get("/users",{params:{login:e}})).data.data[0]||null}Xe.subscribe((e=>Pn.defaults.headers.Authorization="Bearer "+e)),function e(t,n,o){function s(i,a){if(!n[i]){if(!t[i]){var c=Ne;if(!a&&c)return c(i,!0);if(r)return r(i,!0);throw(c=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",c}c=n[i]={exports:{}},t[i][0].call(c.exports,(function(e){return s(t[i][1][e]||e)}),c,c.exports,e,t,n,o)}return n[i].exports}for(var r=Ne,i=0;i<o.length;i++)s(o[i]);return s}({1:[function(e,t,n){e=e("./lib/client"),t.exports={client:e,Client:e}},{"./lib/client":3}],2:[function(e,t,n){function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var o,s;o=e,t=n[s=t],s in o?Object.defineProperty(o,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[s]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var r=e("node-fetch"),i=e("./utils");t.exports=function(e,t){var n=void 0!==e.url?e.url:e.uri;if(i.isURL(n)||(n="https://api.twitch.tv/kraken".concat("/"===n[0]?n:"/".concat(n))),i.isNode()){var o=Object.assign({method:"GET",json:!0},e);o.qs&&(a=new URLSearchParams(o.qs),n+="?".concat(a));var a={};"fetchAgent"in this.opts.connection&&(a.agent=this.opts.connection.fetchAgent);a=r(n,s(s({},a),{},{method:o.method,headers:o.headers,body:o.body}));var c={};a.then((function(e){return c={statusCode:e.status,headers:e.headers},o.json?e.json():e.text()})).then((function(e){return t(null,c,e)}),(function(e){return t(e,c,null)}))}else{var l,u=Object.assign({method:"GET",headers:{}},e,{url:n}),d=new XMLHttpRequest;for(l in d.open(u.method,u.url,!0),u.headers)d.setRequestHeader(l,u.headers[l]);d.responseType="json",d.addEventListener("load",(function(e){4===d.readyState&&(200!==d.status?t(d.status,null,null):t(null,null,d.response))})),d.send()}}},{"./utils":9,"node-fetch":10}],3:[function(e,t,n){(function(n){(function(){function o(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)),o}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){var o,s;o=e,t=n[s=t],s in o?Object.defineProperty(o,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[s]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e){if(this instanceof a==0)return new a(e);this.opts=b.get(e,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=b.get(this.opts.options.clientId,null),this._globalDefaultChannel=b.channel(b.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=b.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=b.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=b.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=b.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=b.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=b.get(this.opts.connection.reconnect,!0),this.reconnectDecay=b.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=b.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=b.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null,e="error",this.opts.options.debug&&(e="info"),this.log=this.opts.logger||m;try{m.setLevel(e)}catch(e){}this.opts.channels.forEach((function(e,t,n){return n[t]=b.channel(e)})),h.call(this),this.setMaxListeners(0)}var c,l=void 0!==n?n:"undefined"!=typeof window?window:{},u=l.WebSocket||e("ws"),d=l.fetch||e("node-fetch"),f=e("./api"),p=e("./commands"),h=e("./events").EventEmitter,m=e("./logger"),g=e("./parser"),y=e("./timer"),b=e("./utils"),v=!1;for(c in b.inherits(a,h),p)a.prototype[c]=p[c];a.prototype.emits=function(e,t){for(var n=0;n<e.length;n++){var o=n<t.length?t[n]:t[t.length-1];this.emit.apply(this,[e[n]].concat(o))}},a.prototype.api=function(){v||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),v=!0),f.apply(void 0,arguments)},a.prototype.handleMessage=function(e){var t=this;if(e){this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(e)),e);var n,o,s,i,a,c,l,u,d,f=b.channel(b.get(e.params[0],null)),p=b.get(e.params[1],null),h=b.get(e.tags["msg-id"],null),m=e.tags=g.badges(g.badgeInfo(g.emotes(e.tags)));for(n in m)"emote-sets"!==n&&"ban-duration"!==n&&"bits"!==n&&("boolean"==typeof(o=m[n])?o=null:"1"===o?o=!0:"0"===o?o=!1:"string"==typeof o&&(o=b.unescapeIRC(o)),m[n]=o);if(null===e.prefix)switch(e.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":var v=new Date;this.currentLatency=(v.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break;default:this.log.warn("Could not parse message with no prefix:\n".concat(JSON.stringify(e,null,4)))}else if("tmi.twitch.tv"===e.prefix)switch(e.command){case"002":case"003":case"004":case"372":case"375":case"CAP":case"SERVERCHANGE":break;case"001":this.username=e.params[0];break;case"376":this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval((function(){t._isConnected()&&t.ws.send("PING"),t.latency=new Date,t.pingTimeout=setTimeout((function(){null!==t.ws&&(t.wasCloseCalled=!1,t.log.error("Ping timeout."),t.ws.close(),clearInterval(t.pingLoop),clearTimeout(t.pingTimeout),clearTimeout(t._updateEmotesetsTimer))}),b.get(t.opts.connection.timeout,9999))}),6e4);var _=b.get(this.opts.options.joinInterval,2e3),w=new y(_=_<300?300:_),$=r(new Set([].concat(r(this.opts.channels),r(this.channels))));this.channels=[];for(var k=0;k<$.length;k++)!function(e){var n=$[e];w.add((function(){t._isConnected()&&t.join(n).catch((function(e){return t.log.error(e)}))}))}(k);w.next();break;case"NOTICE":var x=[null],C=[f,h,p],E=[f,!0],T=[f,!1],S=[C,x],A=[C,[h]],O="[".concat(f,"] ").concat(p);switch(h){case"subs_on":this.log.info("[".concat(f,"] This room is now in subscribers-only mode.")),this.emits(["subscriber","subscribers","_promiseSubscribers"],[E,E,x]);break;case"subs_off":this.log.info("[".concat(f,"] This room is no longer in subscribers-only mode.")),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[T,T,x]);break;case"emote_only_on":this.log.info("[".concat(f,"] This room is now in emote-only mode.")),this.emits(["emoteonly","_promiseEmoteonly"],[E,x]);break;case"emote_only_off":this.log.info("[".concat(f,"] This room is no longer in emote-only mode.")),this.emits(["emoteonly","_promiseEmoteonlyoff"],[T,x]);break;case"slow_on":case"slow_off":case"followers_on_zero":case"followers_on":case"followers_off":case"host_on":case"host_off":break;case"r9k_on":this.log.info("[".concat(f,"] This room is now in r9k mode.")),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[E,E,x]);break;case"r9k_off":this.log.info("[".concat(f,"] This room is no longer in r9k mode.")),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[T,T,x]);break;case"room_mods":var R=(1<(R=p.split(": ")).length?R[1]:"").toLowerCase().split(", ").filter((function(e){return e}));this.emits(["_promiseMods","mods"],[[null,R],[f,R]]);break;case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[f,[]]]);break;case"vips_success":var P=(1<(P=(p=p.endsWith(".")?p.slice(0,-1):p).split(": ")).length?P[1]:"").toLowerCase().split(", ").filter((function(e){return e}));this.emits(["_promiseVips","vips"],[[null,P],[f,P]]);break;case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[f,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(O),this.emits(["notice","_promiseBan"],A);break;case"ban_success":this.log.info(O),this.emits(["notice","_promiseBan"],S);break;case"usage_clear":this.log.info(O),this.emits(["notice","_promiseClear"],A);break;case"usage_mods":this.log.info(O),this.emits(["notice","_promiseMods"],[C,[h,[]]]);break;case"mod_success":this.log.info(O),this.emits(["notice","_promiseMod"],S);break;case"usage_vips":this.log.info(O),this.emits(["notice","_promiseVips"],[C,[h,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(O),this.emits(["notice","_promiseVip"],[C,[h,[]]]);break;case"vip_success":this.log.info(O),this.emits(["notice","_promiseVip"],S);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(O),this.emits(["notice","_promiseMod"],A);break;case"unmod_success":this.log.info(O),this.emits(["notice","_promiseUnmod"],S);break;case"unvip_success":this.log.info(O),this.emits(["notice","_promiseUnvip"],S);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(O),this.emits(["notice","_promiseUnmod"],A);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(O),this.emits(["notice","_promiseUnvip"],A);break;case"color_changed":this.log.info(O),this.emits(["notice","_promiseColor"],S);break;case"usage_color":case"turbo_only_color":this.log.info(O),this.emits(["notice","_promiseColor"],A);break;case"commercial_success":this.log.info(O),this.emits(["notice","_promiseCommercial"],S);break;case"usage_commercial":case"bad_commercial_error":this.log.info(O),this.emits(["notice","_promiseCommercial"],A);break;case"hosts_remaining":this.log.info(O),P=isNaN(p[0])?0:parseInt(p[0]),this.emits(["notice","_promiseHost"],[C,[null,~~P]]);break;case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(O),this.emits(["notice","_promiseHost"],[C,[h,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(O),this.emits(["notice","_promiseR9kbeta"],A);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(O),this.emits(["notice","_promiseR9kbetaoff"],A);break;case"timeout_success":this.log.info(O),this.emits(["notice","_promiseTimeout"],S);break;case"delete_message_success":this.log.info("[".concat(f," ").concat(p,"]")),this.emits(["notice","_promiseDeletemessage"],S);break;case"already_subs_off":case"usage_subs_off":this.log.info(O),this.emits(["notice","_promiseSubscribersoff"],A);break;case"already_subs_on":case"usage_subs_on":this.log.info(O),this.emits(["notice","_promiseSubscribers"],A);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(O),this.emits(["notice","_promiseEmoteonlyoff"],A);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(O),this.emits(["notice","_promiseEmoteonly"],A);break;case"usage_slow_on":this.log.info(O),this.emits(["notice","_promiseSlow"],A);break;case"usage_slow_off":this.log.info(O),this.emits(["notice","_promiseSlowoff"],A);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(O),this.emits(["notice","_promiseTimeout"],A);break;case"untimeout_success":case"unban_success":this.log.info(O),this.emits(["notice","_promiseUnban"],S);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(O),this.emits(["notice","_promiseUnban"],A);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(O),this.emits(["notice","_promiseDeletemessage"],A);break;case"usage_unhost":case"not_hosting":this.log.info(O),this.emits(["notice","_promiseUnhost"],A);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(O),this.emits(["notice","_promiseWhisper"],A);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(O),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[C,[h,f]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(O),this.emit("automod",f,h,p);break;case"unrecognized_cmd":case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(O),this.emit("notice",f,h,p);break;default:p.includes("Login unsuccessful")||p.includes("Login authentication failed")||p.includes("Error logging in")||p.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=p,this.log.error(this.reason),this.ws.close()):p.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn("Could not parse NOTICE from tmi.twitch.tv:\n".concat(JSON.stringify(e,null,4))),this.emit("notice",f,h,p))}break;case"USERNOTICE":var I=m["display-name"]||m.login,j=(_=m["msg-param-sub-plan"]||"",b.unescapeIRC(b.get(m["msg-param-sub-plan-name"],""))||null),L={prime:_.includes("Prime"),plan:_,planName:j},N=~~(m["msg-param-streak-months"]||0),D=m["msg-param-recipient-display-name"]||m["msg-param-recipient-user-name"],U=~~m["msg-param-mass-gift-count"];switch(m["message-type"]=h){case"resub":this.emits(["resub","subanniversary"],[[f,I,N,p,m,L]]);break;case"sub":this.emits(["subscription","sub"],[[f,I,L,p,m]]);break;case"subgift":this.emit("subgift",f,I,N,D,L,m);break;case"anonsubgift":this.emit("anonsubgift",f,N,D,L,m);break;case"submysterygift":this.emit("submysterygift",f,I,U,L,m);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",f,U,L,m);break;case"primepaidupgrade":this.emit("primepaidupgrade",f,I,L,m);break;case"giftpaidupgrade":var M=m["msg-param-sender-name"]||m["msg-param-sender-login"];this.emit("giftpaidupgrade",f,I,M,m);break;case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",f,I,m);break;case"raid":M=m["msg-param-displayName"]||m["msg-param-login"];var B=+m["msg-param-viewerCount"];this.emit("raided",f,M,B,m);break;case"ritual":"new_chatter"===(B=m["msg-param-ritual-name"])?this.emit("newchatter",f,I,m,p):this.emit("ritual",B,f,I,m,p);break;default:this.emit("usernotice",h,f,m,p)}break;case"HOSTTARGET":var F=~~(j=p.split(" "))[1]||0;"-"===j[0]?(this.log.info("[".concat(f,"] Exited host mode.")),this.emits(["unhost","_promiseUnhost"],[[f,F],[null]])):(this.log.info("[".concat(f,"] Now hosting ").concat(j[0]," for ").concat(F," viewer(s).")),this.emit("hosting",f,j[0],F));break;case"CLEARCHAT":1<e.params.length?null===(s=b.get(e.tags["ban-duration"],null))?(this.log.info("[".concat(f,"] ").concat(p," has been banned.")),this.emit("ban",f,p,null,e.tags)):(this.log.info("[".concat(f,"] ").concat(p," has been timed out for ").concat(s," seconds.")),this.emit("timeout",f,p,null,~~s,e.tags)):(this.log.info("[".concat(f,"] Chat was cleared by a moderator.")),this.emits(["clearchat","_promiseClear"],[[f],[null]]));break;case"CLEARMSG":1<e.params.length&&(F=p,s=m.login,m["message-type"]="messagedeleted",this.log.info("[".concat(f,"] ").concat(s,"'s message has been deleted.")),this.emit("messagedeleted",f,s,F,m));break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info("Disconnecting and reconnecting in ".concat(Math.round(this.reconnectTimer/1e3)," seconds..")),this.disconnect().catch((function(e){return t.log.error(e)})),setTimeout((function(){return t.connect().catch((function(e){return t.log.error(e)}))}),this.reconnectTimer);break;case"USERSTATE":e.tags.username=this.username,"mod"===e.tags["user-type"]&&(this.moderators[f]||(this.moderators[f]=[]),this.moderators[f].includes(this.username)||this.moderators[f].push(this.username)),b.isJustinfan(this.getUsername())||this.userstate[f]||(this.userstate[f]=m,this.lastJoined=f,this.channels.push(f),this.log.info("Joined ".concat(f)),this.emit("join",f,b.username(this.getUsername()),!0)),e.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(e.tags["emote-sets"]),this.userstate[f]=m;break;case"GLOBALUSERSTATE":this.globaluserstate=m,this.emit("globaluserstate",m),void 0!==e.tags["emote-sets"]&&this._updateEmoteset(e.tags["emote-sets"]);break;case"ROOMSTATE":b.channel(this.lastJoined)===f&&this.emit("_promiseJoin",null,f),e.tags.channel=f,this.emit("roomstate",f,e.tags),b.hasOwn(e.tags,"subs-only")||(b.hasOwn(e.tags,"slow")&&("boolean"!=typeof e.tags.slow||e.tags.slow?(i=[f,!0,~~e.tags.slow],this.log.info("[".concat(f,"] This room is now in slow mode.")),this.emits(["slow","slowmode","_promiseSlow"],[i,i,[null]])):(i=[f,!1,0],this.log.info("[".concat(f,"] This room is no longer in slow mode.")),this.emits(["slow","slowmode","_promiseSlowoff"],[i,i,[null]]))),b.hasOwn(e.tags,"followers-only")&&("-1"===e.tags["followers-only"]?(a=[f,!1,0],this.log.info("[".concat(f,"] This room is no longer in followers-only mode.")),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[a,a,[null]])):(a=[f,!0,~~e.tags["followers-only"]],this.log.info("[".concat(f,"] This room is now in follower-only mode.")),this.emits(["followersonly","followersmode","_promiseFollowers"],[a,a,[null]]))));break;default:this.log.warn("Could not parse message from tmi.twitch.tv:\n".concat(JSON.stringify(e,null,4)))}else if("jtv"===e.prefix)"MODE"===e.command?"+o"===p?(this.moderators[f]||(this.moderators[f]=[]),this.moderators[f].includes(e.params[2])||this.moderators[f].push(e.params[2]),this.emit("mod",f,e.params[2])):"-o"===p&&(this.moderators[f]||(this.moderators[f]=[]),this.moderators[f].filter((function(t){return t!==e.params[2]})),this.emit("unmod",f,e.params[2])):this.log.warn("Could not parse message from jtv:\n".concat(JSON.stringify(e,null,4)));else switch(e.command){case"353":this.emit("names",e.params[2],e.params[3].split(" "));break;case"366":break;case"JOIN":var q=e.prefix.split("!")[0];b.isJustinfan(this.getUsername())&&this.username===q&&(this.lastJoined=f,this.channels.push(f),this.log.info("Joined ".concat(f)),this.emit("join",f,q,!0)),this.username!==q&&this.emit("join",f,q,!1);break;case"PART":var z=!1,H=e.prefix.split("!")[0];this.username===H&&(z=!0,this.userstate[f]&&delete this.userstate[f],-1!==(q=this.channels.indexOf(f))&&this.channels.splice(q,1),-1!==(q=this.opts.channels.indexOf(f))&&this.opts.channels.splice(q,1),this.log.info("Left ".concat(f)),this.emit("_promisePart",null)),this.emit("part",f,H,z);break;case"WHISPER":z=e.prefix.split("!")[0],this.log.info("[WHISPER] <".concat(z,">: ").concat(p)),b.hasOwn(e.tags,"username")||(e.tags.username=z),e.tags["message-type"]="whisper",z=b.channel(e.tags.username),this.emits(["whisper","message"],[[z,e.tags,p,!1]]);break;case"PRIVMSG":e.tags.username=e.prefix.split("!")[0],"jtv"===e.tags.username?(l=b.username(p.split(" ")[0]),u=p.includes("auto"),p.includes("hosting you for")?(c=b.extractNumber(p),this.emit("hosted",f,l,c,u)):p.includes("hosting you")&&this.emit("hosted",f,l,0,u)):(c=b.get(this.opts.options.messagesLogLevel,"info"),l=b.actionMessage(p),e.tags["message-type"]=l?"action":"chat",p=l?l[1]:p,b.hasOwn(e.tags,"bits")?this.emit("cheer",f,e.tags,p):(b.hasOwn(e.tags,"msg-id")?"highlighted-message"===e.tags["msg-id"]?(u=e.tags["msg-id"],this.emit("redeem",f,e.tags.username,u,e.tags,p)):"skip-subs-mode-message"===e.tags["msg-id"]&&(d=e.tags["msg-id"],this.emit("redeem",f,e.tags.username,d,e.tags,p)):b.hasOwn(e.tags,"custom-reward-id")&&(d=e.tags["custom-reward-id"],this.emit("redeem",f,e.tags.username,d,e.tags,p)),l?(this.log[c]("[".concat(f,"] *<").concat(e.tags.username,">: ").concat(p)),this.emits(["action","message"],[[f,e.tags,p,!1]])):(this.log[c]("[".concat(f,"] <").concat(e.tags.username,">: ").concat(p)),this.emits(["chat","message"],[[f,e.tags,p,!1]]))));break;default:this.log.warn("Could not parse message:\n".concat(JSON.stringify(e,null,4)))}}},a.prototype.connect=function(){var e=this;return new Promise((function(t,n){e.server=b.get(e.opts.connection.server,"irc-ws.chat.twitch.tv"),e.port=b.get(e.opts.connection.port,80),e.secure&&(e.port=443),443===e.port&&(e.secure=!0),e.reconnectTimer=e.reconnectTimer*e.reconnectDecay,e.reconnectTimer>=e.maxReconnectInterval&&(e.reconnectTimer=e.maxReconnectInterval),e._openConnection(),e.once("_promiseConnect",(function(o){o?n(o):t([e.server,~~e.port])}))}))},a.prototype._openConnection=function(){var e="".concat(this.secure?"wss":"ws","://").concat(this.server,":").concat(this.port,"/"),t={};"agent"in this.opts.connection&&(t.agent=this.opts.connection.agent),this.ws=new u(e,"irc",t),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},a.prototype._onOpen=function(){var e=this;this._isConnected()&&(this.log.info("Connecting to ".concat(this.server," on port ").concat(this.port,"..")),this.emit("connecting",this.server,~~this.port),this.username=b.get(this.opts.identity.username,b.justinfan()),this._getToken().then((function(t){var n=b.password(t);e.log.info("Sending authentication to server.."),e.emit("logon"),t="twitch.tv/tags twitch.tv/commands",e._skipMembership||(t+=" twitch.tv/membership"),e.ws.send("CAP REQ :"+t),n?e.ws.send("PASS ".concat(n)):b.isJustinfan(e.username)&&e.ws.send("PASS SCHMOOPIIE"),e.ws.send("NICK ".concat(e.username))})).catch((function(t){e.emits(["_promiseConnect","disconnected"],[[t],["Could not get a token."]])})))},a.prototype._getToken=function(){var e,t=this.opts.identity.password;return"function"==typeof t?(e=t())instanceof Promise?e:Promise.resolve(e):Promise.resolve(t)},a.prototype._onMessage=function(e){var t=this;e.data.trim().split("\r\n").forEach((function(e){(e=g.msg(e))&&t.handleMessage(e)}))},a.prototype._onError=function(){var e=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=null===this.ws?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error("Reconnecting in ".concat(Math.round(this.reconnectTimer/1e3)," seconds..")),this.emit("reconnect"),setTimeout((function(){e.reconnecting=!1,e.connect().catch((function(t){return e.log.error(t)}))}),this.reconnectTimer)),this.ws=null},a.prototype._onClose=function(){var e=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error("Could not connect to server. Reconnecting in ".concat(Math.round(this.reconnectTimer/1e3)," seconds..")),this.emit("reconnect"),setTimeout((function(){e.reconnecting=!1,e.connect().catch((function(t){return e.log.error(t)}))}),this.reconnectTimer))),this.ws=null},a.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},a.prototype._sendCommand=function(e,t,n,o){var s=this;return new Promise((function(r,i){if(!s._isConnected())return i("Not connected to server.");var a;null!==e&&"number"!=typeof e||(null===e&&(e=s._getPromiseDelay()),b.promiseDelay(e).then((function(){return i("No response from Twitch.")}))),null!==t?(a=b.channel(t),s.log.info("[".concat(a,"] Executing command: ").concat(n)),s.ws.send("PRIVMSG ".concat(a," :").concat(n))):(s.log.info("Executing command: ".concat(n)),s.ws.send(n)),"function"==typeof o?o(r,i):r()}))},a.prototype._sendMessage=function(e,t,n,o){var s=this;return new Promise((function(r,i){if(!s._isConnected())return i("Not connected to server.");if(b.isJustinfan(s.getUsername()))return i("Cannot send anonymous messages.");var a,c=b.channel(t);s.userstate[c]||(s.userstate[c]={}),500<=n.length&&(a=b.splitLine(n,500),n=a[0],setTimeout((function(){s._sendMessage(e,t,a[1],(function(){}))}),350)),s.ws.send("PRIVMSG ".concat(c," :").concat(n));var l={};Object.keys(s.emotesets).forEach((function(e){return s.emotesets[e].forEach((function(e){return(b.isRegex(e.code)?g.emoteRegex:g.emoteString)(n,e.code,e.id,l)}))}));var u=Object.assign(s.userstate[c],g.emotes({emotes:g.transformEmotes(l)||null})),d=b.get(s.opts.options.messagesLogLevel,"info"),f=b.actionMessage(n);f?(u["message-type"]="action",s.log[d]("[".concat(c,"] *<").concat(s.getUsername(),">: ").concat(f[1])),s.emits(["action","message"],[[c,u,f[1],!0]])):(u["message-type"]="chat",s.log[d]("[".concat(c,"] <").concat(s.getUsername(),">: ").concat(n)),s.emits(["chat","message"],[[c,u,n,!0]])),"function"==typeof o?o(r,i):r()}))},a.prototype._updateEmoteset=function(e){var t,n=this,o=void 0!==e;o&&(e===this.emotes?o=!1:this.emotes=e),this._skipUpdatingEmotesets?o&&this.emit("emotesets",e,{}):(t=function(){0<n._updateEmotesetsTimerDelay&&(clearTimeout(n._updateEmotesetsTimer),n._updateEmotesetsTimer=setTimeout((function(){return n._updateEmoteset(e)}),n._updateEmotesetsTimerDelay))},this._getToken().then((function(t){var o="https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=".concat(e),r={};return"fetchAgent"in n.opts.connection&&(r.agent=n.opts.connection.fetchAgent),d(o,s(s({},r),{},{headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:"OAuth ".concat(b.token(t)),"Client-ID":n.clientId}}))})).then((function(e){return e.json()})).then((function(o){n.emotesets=o.emoticon_sets||{},n.emit("emotesets",e,n.emotesets),t()})).catch(t))},a.prototype.getUsername=function(){return this.username},a.prototype.getOptions=function(){return this.opts},a.prototype.getChannels=function(){return this.channels},a.prototype.isMod=function(e,t){return e=b.channel(e),this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(b.username(t))},a.prototype.readyState=function(){return null===this.ws?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},a.prototype._isConnected=function(){return null!==this.ws&&1===this.ws.readyState},a.prototype.disconnect=function(){var e=this;return new Promise((function(t,n){null!==e.ws&&3!==e.ws.readyState?(e.wasCloseCalled=!0,e.log.info("Disconnecting from server.."),e.ws.close(),e.once("_promiseDisconnect",(function(){return t([e.server,~~e.port])}))):(e.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),n("Cannot disconnect from server. Socket is not opened or connection is already closing."))}))},a.prototype.off=a.prototype.removeListener,void 0!==t&&t.exports&&(t.exports=a),"undefined"!=typeof window&&(window.tmi={client:a,Client:a})}).call(this)}).call(this,void 0!==je?je:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api":2,"./commands":4,"./events":5,"./logger":6,"./parser":7,"./timer":8,"./utils":9,"node-fetch":10,ws:10}],4:[function(e,t,n){var o=e("./utils");function s(e,t){var n=this;return e=o.channel(e),t=o.get(t,30),this._sendCommand(null,e,"/followers ".concat(t),(function(o,s){n.once("_promiseFollowers",(function(n){n?s(n):o([e,~~t])}))}))}function r(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/followersoff",(function(n,o){t.once("_promiseFollowersoff",(function(t){t?o(t):n([e])}))}))}function i(e){var t=this;return e=o.channel(e),this._sendCommand(null,null,"PART ".concat(e),(function(n,o){t.once("_promisePart",(function(t){t?o(t):n([e])}))}))}function a(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/r9kbeta",(function(n,o){t.once("_promiseR9kbeta",(function(t){t?o(t):n([e])}))}))}function c(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/r9kbetaoff",(function(n,o){t.once("_promiseR9kbetaoff",(function(t){t?o(t):n([e])}))}))}function l(e,t){var n=this;return e=o.channel(e),t=o.get(t,300),this._sendCommand(null,e,"/slow ".concat(t),(function(o,s){n.once("_promiseSlow",(function(n){n?s(n):o([e,~~t])}))}))}function u(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/slowoff",(function(n,o){t.once("_promiseSlowoff",(function(t){t?o(t):n([e])}))}))}t.exports={action:function(e,t){return e=o.channel(e),t="ACTION ".concat(t,""),this._sendMessage(this._getPromiseDelay(),e,t,(function(n,o){n([e,t])}))},ban:function(e,t,n){var s=this;return e=o.channel(e),t=o.username(t),n=o.get(n,""),this._sendCommand(null,e,"/ban ".concat(t," ").concat(n),(function(o,r){s.once("_promiseBan",(function(s){s?r(s):o([e,t,n])}))}))},clear:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/clear",(function(n,o){t.once("_promiseClear",(function(t){t?o(t):n([e])}))}))},color:function(e,t){var n=this;return t=o.get(t,e),this._sendCommand(null,"#tmijs","/color ".concat(t),(function(e,o){n.once("_promiseColor",(function(n){n?o(n):e([t])}))}))},commercial:function(e,t){var n=this;return e=o.channel(e),t=o.get(t,30),this._sendCommand(null,e,"/commercial ".concat(t),(function(o,s){n.once("_promiseCommercial",(function(n){n?s(n):o([e,~~t])}))}))},deletemessage:function(e,t){var n=this;return e=o.channel(e),this._sendCommand(null,e,"/delete ".concat(t),(function(t,o){n.once("_promiseDeletemessage",(function(n){n?o(n):t([e])}))}))},emoteonly:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/emoteonly",(function(n,o){t.once("_promiseEmoteonly",(function(t){t?o(t):n([e])}))}))},emoteonlyoff:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/emoteonlyoff",(function(n,o){t.once("_promiseEmoteonlyoff",(function(t){t?o(t):n([e])}))}))},followersonly:s,followersmode:s,followersonlyoff:r,followersmodeoff:r,host:function(e,t){var n=this;return e=o.channel(e),t=o.username(t),this._sendCommand(2e3,e,"/host ".concat(t),(function(o,s){n.once("_promiseHost",(function(n,r){n?s(n):o([e,t,~~r])}))}))},join:function(e){var t=this;return e=o.channel(e),this._sendCommand(void 0,null,"JOIN ".concat(e),(function(n,s){var r="_promiseJoin",i=!1,a=function a(c,l){e===o.channel(l)&&(t.removeListener(r,a),i=!0,c?s(c):n([e]))};t.on(r,a),a=t._getPromiseDelay(),o.promiseDelay(a).then((function(){i||t.emit(r,"No response from Twitch.",e)}))}))},mod:function(e,t){var n=this;return e=o.channel(e),t=o.username(t),this._sendCommand(null,e,"/mod ".concat(t),(function(o,s){n.once("_promiseMod",(function(n){n?s(n):o([e,t])}))}))},mods:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/mods",(function(n,o){t.once("_promiseMods",(function(s,r){s?o(s):(r.forEach((function(n){t.moderators[e]||(t.moderators[e]=[]),t.moderators[e].includes(n)||t.moderators[e].push(n)})),n(r))}))}))},part:i,leave:i,ping:function(){var e=this;return this._sendCommand(null,null,"PING",(function(t,n){e.latency=new Date,e.pingTimeout=setTimeout((function(){null!==e.ws&&(e.wasCloseCalled=!1,e.log.error("Ping timeout."),e.ws.close(),clearInterval(e.pingLoop),clearTimeout(e.pingTimeout))}),o.get(e.opts.connection.timeout,9999)),e.once("_promisePing",(function(e){return t([parseFloat(e)])}))}))},r9kbeta:a,r9kmode:a,r9kbetaoff:c,r9kmodeoff:c,raw:function(e){return this._sendCommand(null,null,e,(function(t,n){t([e])}))},say:function(e,t){return e=o.channel(e),t.startsWith(".")&&!t.startsWith("..")||t.startsWith("/")||t.startsWith("\\")?"me "===t.substr(1,3)?this.action(e,t.substr(4)):this._sendCommand(null,e,t,(function(n,o){n([e,t])})):this._sendMessage(this._getPromiseDelay(),e,t,(function(n,o){n([e,t])}))},slow:l,slowmode:l,slowoff:u,slowmodeoff:u,subscribers:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/subscribers",(function(n,o){t.once("_promiseSubscribers",(function(t){t?o(t):n([e])}))}))},subscribersoff:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/subscribersoff",(function(n,o){t.once("_promiseSubscribersoff",(function(t){t?o(t):n([e])}))}))},timeout:function(e,t,n,s){var r=this;return e=o.channel(e),t=o.username(t),null===n||o.isInteger(n)||(s=n,n=300),n=o.get(n,300),s=o.get(s,""),this._sendCommand(null,e,"/timeout ".concat(t," ").concat(n," ").concat(s),(function(o,i){r.once("_promiseTimeout",(function(r){r?i(r):o([e,t,~~n,s])}))}))},unban:function(e,t){var n=this;return e=o.channel(e),t=o.username(t),this._sendCommand(null,e,"/unban ".concat(t),(function(o,s){n.once("_promiseUnban",(function(n){n?s(n):o([e,t])}))}))},unhost:function(e){var t=this;return e=o.channel(e),this._sendCommand(2e3,e,"/unhost",(function(n,o){t.once("_promiseUnhost",(function(t){t?o(t):n([e])}))}))},unmod:function(e,t){var n=this;return e=o.channel(e),t=o.username(t),this._sendCommand(null,e,"/unmod ".concat(t),(function(o,s){n.once("_promiseUnmod",(function(n){n?s(n):o([e,t])}))}))},unvip:function(e,t){var n=this;return e=o.channel(e),t=o.username(t),this._sendCommand(null,e,"/unvip ".concat(t),(function(o,s){n.once("_promiseUnvip",(function(n){n?s(n):o([e,t])}))}))},vip:function(e,t){var n=this;return e=o.channel(e),t=o.username(t),this._sendCommand(null,e,"/vip ".concat(t),(function(o,s){n.once("_promiseVip",(function(n){n?s(n):o([e,t])}))}))},vips:function(e){var t=this;return e=o.channel(e),this._sendCommand(null,e,"/vips",(function(e,n){t.once("_promiseVips",(function(t,o){t?n(t):e(o)}))}))},whisper:function(e,t){var n=this;return(e=o.username(e))===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs","/w ".concat(e," ").concat(t),(function(e,t){n.once("_promiseWhisper",(function(e){e&&t(e)}))})).catch((function(s){if(s&&"string"==typeof s&&0!==s.indexOf("No response from Twitch."))throw s;var r=o.channel(e);s=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:n.getUsername()},n.globaluserstate);return n.emits(["whisper","message"],[[r,s,t,!0],[r,s,t,!0]]),[e,t]}))}}},{"./utils":9}],5:[function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"object"===o(e)&&null!==e}function a(e){return void 0===e}((t.exports=s).EventEmitter=s).prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},s.prototype.emit=function(e){var t,n,o,s,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a(n=this._events[e]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(l=n.slice()).length,c=0;c<o;c++)l[c].apply(this,s);return!0},s.prototype.on=s.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?s.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},s.prototype.once=function(e,t){if(!r(t))throw TypeError("listener must be a function");var n=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var o,s=1,i=e;for(o in this._events)this._events.hasOwnProperty(o)&&o.startsWith(i)&&s++;e+=s}function a(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,a),n||(n=!0,t.apply(this,arguments))}return a.listener=t,this.on(e,a),this},s.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,o=-1,n===t||r(n.listener)&&n.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var c,l=e;for(c in this._events)this._events.hasOwnProperty(c)&&c.startsWith(l)&&(isNaN(parseInt(c.substr(c.length-1)))||(this._events[e+parseInt(c.substr(c.length-1)-1)]=this._events[c],delete this._events[c]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(i(n)){for(a=s;0<a--;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},s.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},s.prototype.listeners=function(e){return e=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},s.prototype.listenerCount=function(e){if(this._events){if(r(e=this._events[e]))return 1;if(e)return e.length}return 0},s.listenerCount=function(e,t){return e.listenerCount(t)}},{}],6:[function(e,t,n){var o=e("./utils"),s="info",r={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function i(e){return function(t){r[s]<=r[e]&&console.log("[".concat(o.formatDate(new Date),"] ").concat(e,": ").concat(t))}}t.exports={setLevel:function(e){s=e},trace:i("trace"),debug:i("debug"),info:i("info"),warn:i("warn"),error:i("error"),fatal:i("fatal")}},{"./utils":9}],7:[function(e,t,n){var o=e("./utils"),s=/\S+/g;function r(e,t,n,o,s){n=2<arguments.length&&void 0!==n?n:",";var r=3<arguments.length&&void 0!==o?o:"/",i=4<arguments.length?s:void 0;if(void 0===(o=e[t]))return e;if(s="string"==typeof o,e[t+"-raw"]=s?o:null,!0===o)return e[t]=null,e;if(e[t]={},s)for(var a=o.split(n),c=0;c<a.length;c++){var l=a[c].split(r),u=l[1];void 0!==i&&u&&(u=u.split(i)),e[t][l[0]]=u||null}return e}t.exports={badges:function(e){return r(e,"badges")},badgeInfo:function(e){return r(e,"badge-info")},emotes:function(e){return r(e,"emotes","/",":",",")},emoteRegex:function(e,t,n,r){s.lastIndex=0;for(var i,a=new RegExp("(\\b|^|\\s)"+o.unescapeHtml(t)+"(\\b|$|\\s)");null!==(i=s.exec(e));)a.test(i[0])&&(r[n]=r[n]||[],r[n].push([i.index,s.lastIndex-1]))},emoteString:function(e,t,n,r){var i;for(s.lastIndex=0;null!==(i=s.exec(e));)i[0]===o.unescapeHtml(t)&&(r[n]=r[n]||[],r[n].push([i.index,s.lastIndex-1]))},transformEmotes:function(e){var t="";return Object.keys(e).forEach((function(n){t="".concat(t+n,":"),e[n].forEach((function(e){return t="".concat(t+e.join("-"),",")})),t="".concat(t.slice(0,-1),"/")})),t.slice(0,-1)},formTags:function(e){var t,n=[];for(t in e){var s=o.escapeIRC(e[t]);n.push("".concat(t,"=").concat(s))}return"@".concat(n.join(";"))},msg:function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,o=0;if(64===e.charCodeAt(0)){if(-1===(o=e.indexOf(" ")))return null;for(var s=e.slice(1,o).split(";"),r=0;r<s.length;r++){var i=s[r],a=i.split("=");t.tags[a[0]]=i.substring(i.indexOf("=")+1)||!0}n=o+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(o=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,o),n=o+1;32===e.charCodeAt(n);)n++}if(-1===(o=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,o),n=o+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(o=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===o){if(-1===o){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,o)),n=o+1;32===e.charCodeAt(n);)n++}return t}}},{"./utils":9}],8:[function(e,t,n){t.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queue=[],this.index=0,this.defaultDelay=void 0===t?3e3:t}var t;return(t=[{key:"add",value:function(e,t){this.queue.push({fn:e,delay:t})}},{key:"next",value:function(){var e,t=this,n=this.index++;(n=this.queue[n])&&(e=this.queue[this.index],n.fn(),e&&(n=void 0===e.delay?this.defaultDelay:e.delay,setTimeout((function(){return t.next()}),n)))}}])&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,t),e}()},{}],9:[function(e,t,n){(function(e){(function(){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,s=/^\u0001ACTION ([^\u0001]+)\u0001$/,r=/^(justinfan)(\d+$)/,i=/\\([sn:r\\])/g,a=/([ \n;\r\\])/g,c={s:" ",n:"",":":";",r:""},l={" ":"s","\n":"n",";":":","\r":"r"},u=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),d=/[|\\^$*+?:#]/,f=t.exports={get:function(e,t){return void 0===e?t:e},hasOwn:function(e,t){return{}.hasOwnProperty.call(e,t)},promiseDelay:function(e){return new Promise((function(t){return setTimeout(t,e)}))},isFinite:(o=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},p.toString=function(){return o.toString()},p),toNumber:function(e,t){return null===e?0:(t=Math.pow(10,f.isFinite(t)?t:0),Math.round(e*t)/t)},isInteger:function(e){return!isNaN(f.toNumber(e,0))},isRegex:function(e){return d.test(e)},isURL:function(e){return u.test(e)},justinfan:function(){return"justinfan".concat(Math.floor(8e4*Math.random()+1e3))},isJustinfan:function(e){return r.test(e)},channel:function(e){var t;return"#"===(t=(e||"").toLowerCase())[0]?t:"#"+t},username:function(e){var t;return"#"===(t=(e||"").toLowerCase())[0]?t.slice(1):t},token:function(e){return e?e.toLowerCase().replace("oauth:",""):""},password:function(e){return(e=f.token(e))?"oauth:".concat(e):""},actionMessage:function(e){return e.match(s)},replaceAll:function(e,t){if(null==e)return null;for(var n in t)e=e.replace(new RegExp(n,"g"),t[n]);return e},unescapeHtml:function(e){return e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'")},unescapeIRC:function(e){return e&&"string"==typeof e&&e.includes("\\")?e.replace(i,(function(e,t){return t in c?c[t]:t})):e},escapeIRC:function(e){return e&&"string"==typeof e?e.replace(a,(function(e,t){return t in l?"\\".concat(l[t]):t})):e},addWord:function(e,t){return e.length?e+" "+t:e+t},splitLine:function(e,t){var n=e.substring(0,t).lastIndexOf(" ");return[e.substring(0,n=-1===n?t-1:n),e.substring(n+1)]},extractNumber:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)if(f.isInteger(t[n]))return~~t[n];return 0},formatDate:function(e){var t=e.getHours();e=((e=e.getMinutes())<10?"0":"")+e;return"".concat(t=(t<10?"0":"")+t,":").concat(e)},inherits:function(e,t){function n(){}e.super_=t,n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},isNode:function(){try{return"object"===(void 0===e?"undefined":n(e))&&"[object process]"===Object.prototype.toString.call(e)}catch(e){}return!1}};function p(e){return o.apply(this,arguments)}}).call(this)}).call(this,e("_process"))},{_process:11}],10:[function(e,t,n){},{}],11:[function(e,t,n){var o,s;t=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(o===setTimeout)return setTimeout(e,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=a(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=m,t.addListener=m,t.once=m,t.off=m,t.removeListener=m,t.removeAllListeners=m,t.emit=m,t.prependListener=m,t.prependOnceListener=m,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}]},{},[1]);var jn={},Ln=Le((function(e,t){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response})),Nn=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")},Dn=Le((function(e){var t=jn,n={global:{},users:{}};function o(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}async function s(e,t){let n;t=t.replace("oauth:","");let r=await Ln("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:`OAuth ${t}`}}).then((e=>e.json()));if(!r.client_id||!r.scopes.includes("channel:read:redemptions")||!r.scopes.includes("user:read:email"))return void console.error("Invalid Password or Permission Scopes (channel:read:redemptions, user:read:email)");let i,a=(await Ln("https://api.twitch.tv/helix/users?login="+e,{headers:{"Client-ID":r.client_id,Authorization:`Bearer ${t}`}}).then((e=>e.json()))).data[0].id;i="undefined"!=typeof window?new WebSocket("wss://pubsub-edge.twitch.tv"):new Nn,i.onopen=function(e){i.send(JSON.stringify({type:"PING"})),n=setInterval((()=>{i.send(JSON.stringify({type:"PING"}))}),6e4);let s={type:"LISTEN",nonce:o(15),data:{topics:[`channel-points-channel-v1.${a}`],auth_token:t}};i.send(JSON.stringify(s))},i.onerror=function(e){console.error(e)},i.onmessage=function(n){switch(message=JSON.parse(n.data),message.type){case"RESPONSE":"ERR_BADAUTH"===message.error&&console.error("PubSub Authentication Failure");break;case"RECONNECT":setTimeout((()=>{s(e,t)}),3e3);break;case"MESSAGE":if(message.data.topic.startsWith("channel-points-channel")){let e=JSON.parse(message.data.message);if("reward-redeemed"===e.type){let t=e.data.redemption;var o=t.reward,r={id:o.id,channelId:o.channel_id,title:o.title,prompt:o.prompt,cost:o.cost,userInputRequired:o.is_user_input_required,subOnly:o.is_sub_only,image:{url1x:o.image?o.image.url_1x:null,url2x:o.image?o.image.url_2x:null,url4x:o.image?o.image.url_4x:null},defaultImage:{url1x:o.default_image.url_1x,url2x:o.default_image.url_2x,url4x:o.default_image.url_4x},backgroundColor:o.background_color,enabled:o.is_enabled,paused:o.is_paused,inStock:o.is_in_stock,maxPerStream:{enabled:o.max_per_stream.is_enabled,maxPerStream:o.max_per_stream.max_per_stream},shouldRedemptionsSkipRequestQueue:o.should_redemptions_skip_request_queue,templateId:o.template_id,updatedForIndicatorAt:o.updated_for_indicator_at,maxPerUserPerStream:{enabled:o.max_per_user_per_stream.is_enabled,maxPerUserPerStream:o.max_per_user_per_stream.max_per_user_per_stream},globalCooldown:{enabled:o.global_cooldown.is_enabled,globalCooldownSeconds:o.global_cooldown.global_cooldown_seconds},redemptionsRedeemedCurrentStream:o.redemptions_redeemed_current_stream,cooldownExpiresAt:o.cooldown_expires_at},i={channelId:t.channel_id,reward:r,rewardFulfilled:"FULFILLED"===t.status,userId:t.user.id,username:t.user.login,displayName:t.user.display_name,customRewardId:t.id,timestamp:t.redeemed_at};d.onReward(t.user.display_name||t.user.login,t.reward.title,t.reward.cost,t.user_input||"",i)}}}},i.onclose=function(){clearInterval(n),setTimeout((()=>{s(e,t)}),3e3)}}var r="",i="",a=null,c=null,l=!0,u=0,d={isDebug:!1,chatModes:{},version:function(){return"@VERSION"},onError:function(e){console.error("Error:",e)},onCommand:function(e,t,n,o,s){d.isDebug&&console.log("onCommand default handler")},onChat:function(e,t,n,o,s){d.isDebug&&console.log("onChat default handler")},onWhisper:function(e,t,n,o,s){d.isDebug&&console.log("onWhisper default handler")},onMessageDeleted:function(e,t){d.isDebug&&console.log("onMessageDeleted default handler")},onBan:function(e,t){d.isDebug&&console.log("onBan default handler")},onTimeout:function(e,t,n){d.isDebug&&console.log("onTimeout default handler")},onJoin:function(e,t,n){d.isDebug&&console.log("onJoin default handler")},onPart:function(e,t,n){d.isDebug&&console.log("onPart default handler")},onHosted:function(e,t,n,o){d.isDebug&&console.log("onHosted default handler")},onRaid:function(e,t,n){d.isDebug&&console.log("onRaid default handler")},onSub:function(e,t,n,o){d.isDebug&&console.log("onSub default handler")},onResub:function(e,t,n,o,s,r){d.isDebug&&console.log("onResub default handler")},onSubGift:function(e,t,n,o,s,r){d.isDebug&&console.log("onSubGift default handler")},onSubMysteryGift:function(e,t,n,o,s){d.isDebug&&console.log("onSubMysteryGift default handler")},onGiftSubContinue:function(e,t,n){d.isDebug&&console.log("onGiftSubContinue default handler")},onCheer:function(e,t,n,o,s){d.isDebug&&console.log("onCheer default handler")},onChatMode:function(e,t){d.isDebug&&console.log("onChatMode default handler")},onReward:function(e,t,n,o,s){d.isDebug&&console.log("onReward default handler")},onConnected:function(e,t,n){},onReconnect:function(e){},Say:function(e,t){return!!c&&(t||(t=r),c.say(t,e).catch(d.onError),!0)},Whisper:function(e,t){return!!c&&(c.whisper(t,e).catch(d.onError),!0)},Announce:function(e,t,n=null){return!!c&&(t||(t=r),c.say(t,`/announce ${e}`).catch(d.onError),!0)},DeleteMessage:function(e,t){return!!c&&(t||(t=r),c.deletemessage(t,e).catch(d.onError),!0)},GetClient:function(){return c},Init:function(e,o,a,f){if(("string"==typeof(a=a||[e])||a instanceof String)&&(a=[a]),!Array.isArray(a))throw new Error("Channels is not an array");d.isDebug=f,r=a[0];var p={options:{debug:f,skipUpdatingEmotesets:!0},connection:{reconnect:!0,secure:!0},channels:a};o&&(p.identity={username:e,password:o},i=o),(c=new t.client(p)).on("roomstate",(function(e,t){try{var n=e.replace("#","");d.chatModes[n]=d.chatModes[n]||{},"emote-only"in t&&(d.chatModes[n].emoteOnly=t["emote-only"]),"followers-only"in t&&(d.chatModes[n].followerOnly=t["followers-only"]>=0),"subs-only"in t&&(d.chatModes[n].subOnly=t["subs-only"]),"r9k"in t&&(d.chatModes[n].r9kMode=t.r9k),"slow"in t&&(d.chatModes[n].slowMode=t.slow),d.onChatMode(d.chatModes[n],n)}catch(e){d.onError(e)}})),c.on("message",(function(t,o,s,r){try{var i=o["display-name"]||o.username||e,a="#"+o.username===t,c=o.mod,l=o.badges&&"0"===o.badges.founder,u=l||o.badges&&void 0!==o.badges.subscriber||o.subscriber,f=o.badges&&"1"===o.badges.vip||!1,p="highlighted-message"===o["msg-id"],h=o["user-id"],m=o.id,g=o["room-id"],y=o.badges,b=o.color,v=o.emotes,_=o.flags,w=o["tmi-sent-ts"],$=o["emote-only"]||!1,k=o["message-type"],x=o["custom-reward-id"]||null,C={broadcaster:a,mod:c,founder:l,subscriber:u||l,vip:f,highlighted:p,customReward:!!x},E={id:m,channel:t.replace("#",""),roomId:g,messageType:k,messageEmotes:v,isEmoteOnly:$,userId:h,username:o.username,displayName:o["display-name"],userColor:b,userBadges:y,userState:o,customRewardId:x,flags:_,timestamp:w};if(r||"!"!==s[0])"action"===k||"chat"===k?d.onChat(i,s,C,r,E):"whisper"===k&&d.onWhisper(i,s,C,r,E);else{var T=s.split(/ (.*)/),S=T[0].slice(1).toLowerCase(),A=T[1]||"";E.sinceLastCommand=function(e,t){if(!e)return{any:null,user:null};var o=new Date,s={};return n.global[e]?s.any=o-n.global[e]:s.any=0,n.global[e]=o,t?(n.users[t]||(n.users[t]={}),n.users[t][e]?s.user=o-n.users[t][e]:s.user=0,n.users[t][e]=o):s.user=null,s}(S,h),d.onCommand(i,S,A,C,E)}}catch(e){d.onError(e)}})),c.on("messagedeleted",(function(e,t,n,o){try{var s=o["target-msg-id"],r={id:s,roomId:o["room-id"],username:t,message:n};d.onMessageDeleted(s,r)}catch(e){d.onError(e)}})),c.on("ban",(function(e,t,n,o){try{var s=t,r={roomId:o["room-id"],username:t,bannedUserId:o["target-user-id"]};d.onBan(s,r)}catch(e){d.onError(e)}})),c.on("timeout",(function(e,t,n,o,s){try{var r=t,i=o,a={roomId:s["room-id"],username:t,timedOutUserId:s["target-user-id"]};d.onTimeout(r,i,a)}catch(e){d.onError(e)}})),c.on("join",(function(e,t,n){var o={channel:e.replace("#","")};d.onJoin(t,n,o)})),c.on("part",(function(e,t,n){var o={channel:e.replace("#","")};d.onPart(t,n,o)})),c.on("hosted",(function(e,t,n,o){var s={channel:e.replace("#","")};d.onHosted(t,n,o,s)})),c.on("raided",(function(e,t,n){var o={channel:e.replace("#","")};d.onRaid(t,n,o)})),c.on("cheer",(function(e,t,n){var o=~~t.bits,s=t["room-id"],r=t["display-name"]||t.username||t.login,i=t["user-id"],a="#"+t.username===e,c=t.mod,l=t.badges&&"0"===t.badges.founder,u={broadcaster:a,mod:c,founder:l,subscriber:l||t.badges&&void 0!==t.badges.subscriber||t.subscriber,vip:t.badges&&"1"===t.badges.vip||!1},f={id:t.id,channel:e.replace("#",""),roomId:s,userId:i,username:t.username,userColor:t.color,userBadges:t.badges,userState:t,displayName:t["display-name"],messageEmotes:t.emotes,subscriber:t.subscriber};d.onCheer(r,n,o,u,f)})),c.on("subscription",(function(e,t,n,o,s){var r={id:s.id,roomId:s["room-id"],messageType:s["message-type"],messageEmotes:s.emotes,userId:s["user-id"],username:s.login,displayName:s["display-name"],userColor:s.color,userBadges:s.badges,userState:s,channel:e.replace("#","")};d.onSub(t,o,n,r)})),c.on("resub",(function(e,t,n,o,s,r){var i=~~s["msg-param-cumulative-months"],a={id:s.id,roomId:s["room-id"],messageType:s["message-type"],messageEmotes:s.emotes,userId:s["user-id"],username:s.login,displayName:s["display-name"],userColor:s.color,userBadges:s.badges,channel:e.replace("#","")};d.onResub(t,o,n,i,r,a)})),c.on("subgift",(function(e,t,n,o,s,r){var i=~~r["msg-param-sender-count"],a={id:r.id,roomId:r["room-id"],messageType:r["message-type"],messageEmotes:r.emotes,userId:r["user-id"],username:r.login,displayName:r["display-name"],userColor:r.color,userBadges:r.badges,userState:r,recipientDisplayName:r["msg-param-recipient-display-name"],recipientUsername:r["msg-param-recipient-user-name"],recipientId:r["msg-param-recipient-id"],channel:e.replace("#","")};d.onSubGift(t,n,o,i,s,a)})),c.on("submysterygift",(function(e,t,n,o,s){var r=~~s["msg-param-sender-count"],i={id:s.id,roomId:s["room-id"],messageType:s["message-type"],messageEmotes:s.emotes,userId:s["user-id"],username:s.login,displayName:s["display-name"],userColor:s.color,userBadges:s.badges,userState:s,recipientDisplayName:s["msg-param-recipient-display-name"],recipientUsername:s["msg-param-recipient-user-name"],recipientId:s["msg-param-recipient-id"],userMassGiftCount:~~s["msg-param-mass-gift-count"],channel:e.replace("#","")};d.onSubMysteryGift(t,n,r,o,i)})),c.on("giftpaidupgrade",(function(e,t,n,o){var s={id:o.id,roomId:o["room-id"],messageType:o["message-type"],messageEmotes:o.emotes,userId:o["user-id"],username:o.login,displayName:o["display-name"],userColor:o.color,userBadges:o.badges,userState:o,gifterUsername:o["msg-param-sender-login"],gifterDisplayName:o["msg-param-sender-name"],channel:e.replace("#","")};d.onGiftSubContinue(t,n,s)})),c.on("connected",(function(e,t){console.log("Connected:"+e+":"+t),d.onConnected(e,t,l),l=!1})),c.on("reconnect",(function(){console.log("Reconnecting"),u++,d.onReconnect(u)})),c.connect().catch(d.onError),o&&s(r,o)},Disconnect:function(){c.disconnect().catch(d.onError)},GetChannelRewards:async function(e,t=!1){if(i){if(!a){let t=await Ln(`https://api.twitch.tv/helix/users?login=${r}`,{headers:{"Client-ID":e,Authorization:`Bearer ${i}`}}).then((e=>e.json()));a=t.data[0]}return(await Ln(`https://api.twitch.tv/helix/channel_points/custom_rewards?broadcaster_id=${a.id}&only_manageable_rewards=${t}`,{headers:{"Client-ID":e,Authorization:`Bearer ${i}`}}).then((e=>e.json()))).data||[]}return[]},CreateChannelReward:async function(e,t){if(i){if(!a){let t=await Ln(`https://api.twitch.tv/helix/users?login=${r}`,{headers:{"Client-ID":e,Authorization:`Bearer ${i}`}}).then((e=>e.json()));a=t.data[0]}return(await Ln(`https://api.twitch.tv/helix/channel_points/custom_rewards?broadcaster_id=${a.id}`,{method:"POST",headers:{"Client-ID":e,Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json()))).data[0]}throw new Error("Missing Channel Password")},UpdateChannelReward:async function(e,t,n){if(i){if(!a){let t=await Ln(`https://api.twitch.tv/helix/users?login=${r}`,{headers:{"Client-ID":e,Authorization:`Bearer ${i}`}}).then((e=>e.json()));a=t.data[0]}return(await Ln(`https://api.twitch.tv/helix/channel_points/custom_rewards?broadcaster_id=${a.id}&id=${t}`,{method:"PATCH",headers:{"Client-ID":e,Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json()))).data[0]}throw new Error("Missing Channel Password")},DeleteChannelReward:async function(e,t){if(i){if(!a){let t=await Ln(`https://api.twitch.tv/helix/users?login=${r}`,{headers:{"Client-ID":e,Authorization:`Bearer ${i}`}}).then((e=>e.json()));a=t.data[0]}return await Ln(`https://api.twitch.tv/helix/channel_points/custom_rewards?broadcaster_id=${a.id}&id=${t}`,{method:"DELETE",headers:{"Client-ID":e,Authorization:`Bearer ${i}`}}).then((e=>e.text()))}throw new Error("Missing Channel Password")}};e.exports&&(e.exports=d),"undefined"!=typeof window&&(window.ComfyJS=d,t=window.tmi)}));function Un(t){let n,o,s,r,i,c=t[0]&&t[0].trackName,l=qn(t);return{c(){n=I("main"),l.c(),o=N(),s=I("iconify-icon"),F(s,"icon","fa-brands:spotify"),F(s,"class","spotify-logo svelte-1ch1x5m"),M(n,"class","svelte-1ch1x5m")},m(e,t){R(e,n,t),l.m(n,null),S(n,o),S(n,s),i=!0},p(t,s){1&s&&a(c,c=t[0]&&t[0].trackName)?(we(),xe(l,1,1,e),$e(),l=qn(t),l.c(),ke(l,1),l.m(n,o)):l.p(t,s)},i(e){i||(ke(l),ue((()=>{r||(r=Ee(n,wn,{duration:500},!0)),r.run(1)})),i=!0)},o(e){xe(l),r||(r=Ee(n,wn,{duration:500},!1)),r.run(0),i=!1},d(e){e&&P(n),l.d(e),e&&r&&r.end()}}}function Mn(e){let t,n=(e[0]&&e[0].trackName)+"";return{c(){t=L(n)},m(e,n){R(e,t,n)},p(e,o){1&o&&n!==(n=(e[0]&&e[0].trackName)+"")&&q(t,n)},d(e){e&&P(t)}}}function Bn(e){let t,n=(e[0]&&e[0].albumName)+"";return{c(){t=L(n)},m(e,n){R(e,t,n)},p(e,o){1&o&&n!==(n=(e[0]&&e[0].albumName)+"")&&q(t,n)},d(e){e&&P(t)}}}function Fn(e){let t,n=(e[0]&&e[0].artistNames.join(", "))+"";return{c(){t=L(n)},m(e,n){R(e,t,n)},p(e,o){1&o&&n!==(n=(e[0]&&e[0].artistNames.join(", "))+"")&&q(t,n)},d(e){e&&P(t)}}}function qn(n){let o,s,a,c,u,d,f,p,h,m,g,y,b,v,_,w,$,x,C,E,A,O,j,D,U,B,F=Jn(n[1])+"",z=Jn(n[0].trackLengthMs)+"";return f=new Tn({props:{$$slots:{default:[Mn]},$$scope:{ctx:n}}}),m=new Tn({props:{$$slots:{default:[Bn]},$$scope:{ctx:n}}}),b=new Tn({props:{$$slots:{default:[Fn]},$$scope:{ctx:n}}}),{c(){o=I("div"),s=I("img"),c=N(),u=I("div"),d=I("div"),Ae(f.$$.fragment),p=N(),h=I("div"),Ae(m.$$.fragment),g=N(),y=I("div"),Ae(b.$$.fragment),v=N(),_=I("div"),w=I("div"),$=L(F),x=N(),C=I("div"),E=I("div"),A=N(),O=I("div"),j=L(z),M(s,"class","album-art svelte-1ch1x5m"),l(s.src,a=n[0]&&n[0].albumArtUrl)||M(s,"src",a),M(s,"alt","Album Art"),M(d,"class","track-name svelte-1ch1x5m"),M(h,"class","album-name svelte-1ch1x5m"),M(y,"class","artist-name svelte-1ch1x5m"),M(w,"class","time elapsed svelte-1ch1x5m"),M(E,"class","progress-bar-elapsed svelte-1ch1x5m"),H(E,"width",n[1]/n[0].trackLengthMs*100+"%"),M(C,"class","progress-bar svelte-1ch1x5m"),M(O,"class","time total svelte-1ch1x5m"),M(_,"class","progress-bar-container svelte-1ch1x5m"),M(u,"class","text-container svelte-1ch1x5m"),M(o,"class","nowplaying-container svelte-1ch1x5m")},m(e,t){R(e,o,t),S(o,s),S(o,c),S(o,u),S(u,d),Oe(f,d,null),S(u,p),S(u,h),Oe(m,h,null),S(u,g),S(u,y),Oe(b,y,null),S(u,v),S(u,_),S(_,w),S(w,$),S(_,x),S(_,C),S(C,E),S(_,A),S(_,O),S(O,j),B=!0},p(e,t){(!B||1&t&&!l(s.src,a=e[0]&&e[0].albumArtUrl))&&M(s,"src",a);const n={};257&t&&(n.$$scope={dirty:t,ctx:e}),f.$set(n);const o={};257&t&&(o.$$scope={dirty:t,ctx:e}),m.$set(o);const r={};257&t&&(r.$$scope={dirty:t,ctx:e}),b.$set(r),(!B||2&t)&&F!==(F=Jn(e[1])+"")&&q($,F),(!B||3&t)&&H(E,"width",e[1]/e[0].trackLengthMs*100+"%"),(!B||1&t)&&z!==(z=Jn(e[0].trackLengthMs)+"")&&q(j,z)},i(n){B||(ke(f.$$.fragment,n),ke(m.$$.fragment,n),ke(b.$$.fragment,n),ue((()=>{U&&U.end(1),D=function(n,o,s){let r,a,c=o(n,s),l=!1,u=0;function d(){r&&Y(n,r)}function f(){const{delay:o=0,duration:s=300,easing:i=t,tick:f=e,css:p}=c||Ce;p&&(r=Q(n,0,1,s,o,i,p,u++)),f(0,1);const h=k()+o,m=h+s;a&&a.abort(),l=!0,ue((()=>be(n,!0,"start"))),a=T((e=>{if(l){if(e>=m)return f(1,0),be(n,!0,"end"),d(),l=!1;if(e>=h){const t=i((e-h)/s);f(t,1-t)}}return l}))}let p=!1;return{start(){p||(p=!0,Y(n),i(c)?(c=c(),ye().then(f)):f())},invalidate(){p=!1},end(){l&&(d(),l=!1)}}}(o,kn,{pixels:150,duration:400}),D.start()})),B=!0)},o(n){xe(f.$$.fragment,n),xe(m.$$.fragment,n),xe(b.$$.fragment,n),D&&D.invalidate(),U=function(n,o,s){let a,c=o(n,s),l=!0;const u=_e;function d(){const{delay:o=0,duration:s=300,easing:i=t,tick:d=e,css:f}=c||Ce;f&&(a=Q(n,1,0,s,o,i,f));const p=k()+o,h=p+s;ue((()=>be(n,!1,"start"))),T((e=>{if(l){if(e>=h)return d(0,1),be(n,!1,"end"),--u.r||r(u.c),!1;if(e>=p){const t=i((e-p)/s);d(1-t,t)}}return l}))}return u.r+=1,i(c)?ye().then((()=>{c=c(),d()})):d(),{end(e){e&&c.tick&&c.tick(1,0),l&&(a&&Y(n,a),l=!1)}}}(o,$n,{pixels:200,duration:300}),B=!1},d(e){e&&P(o),Re(f),Re(m),Re(b),e&&U&&U.end()}}}function zn(e){let t,n,o=e[0]&&Un(e);return{c(){o&&o.c(),t=D()},m(e,s){o&&o.m(e,s),R(e,t,s),n=!0},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&ke(o,1)):(o=Un(e),o.c(),ke(o,1),o.m(t.parentNode,t)):o&&(we(),xe(o,1,1,(()=>{o=null})),$e())},i(e){n||(ke(o),n=!0)},o(e){xe(o),n=!1},d(e){o&&o.d(e),e&&P(t)}}}const Hn=5e3;function Jn(e){let t="";const n=Math.floor(e/36e5);n>0&&(t+=n.toString()+":");let o=Math.floor(e%36e5/6e4).toString();n>0&&(o=o.padStart(2,"0")),t+=o+":";return t+=Math.floor(e%6e4/1e3).toString().padStart(2,"0"),t}function Gn(e,t,n){let o,s,r;f(e,et,(e=>n(3,o=e))),f(e,Xe,(e=>n(4,s=e))),f(e,tt,(e=>n(5,r=e)));let{nowPlaying:i=null}=t,{computedProgressMs:a=0}=t;async function c(){let e;n(0,i=await async function(){if(!vn)return null;const e=await _n.getMyCurrentPlaybackState();return e.is_playing&&e.item?{albumName:e.item.album.name,albumArtUrl:e.item.album.images[0].url||null,artistNames:e.item.artists.map((e=>e.name)),trackName:e.item.name,trackLengthMs:e.item.duration_ms,progressMs:e.progress_ms,trackUrl:e.item.external_urls.spotify}:null}()),i?(e=Math.min(Hn,i.trackLengthMs-i.progressMs+2e3||Hn),Math.abs(a-i.progressMs)>1e3&&n(1,a=i.progressMs)):(n(1,a=0),e=Hn),setTimeout(c,e)}return ee((async()=>{await gn(),await c(),setInterval((()=>{n(1,a=Math.min(a+500,(null==i?void 0:i.trackLengthMs)||0))}),500),async function(){if(s){const e=await In();Dn.onCommand=(t,n)=>{n===r&&(i?Dn.Say(`@${t} -> now playing ${i.trackName} by ${i.artistNames.join(",")} on Spotify: ${i.trackUrl}`,e.login):Dn.Say(`@${t} -> nothing is playing on Spotify at the moment.`,e.login))},Dn.Init(e.login,"oauth:"+s,o||e.login)}}()})),e.$$set=e=>{"nowPlaying"in e&&n(0,i=e.nowPlaying),"computedProgressMs"in e&&n(1,a=e.computedProgressMs)},[i,a]}class Wn extends Ie{constructor(e){super(),Pe(this,e,Gn,zn,a,{nowPlaying:0,computedProgressMs:1})}}const Vn=e=>({}),Kn=e=>({});function Qn(e){let t,n,o,s;const r=e[15].icon,i=p(r,e,e[14],Kn),a=e[15].default,c=p(a,e,e[14],null);return{c(){t=I("div"),i&&i.c(),n=N(),c&&c.c(),M(t,"class",_(e[2])+" svelte-43fqv4"),M(t,"role","alert"),M(t,"aria-atomic",e[1]),M(t,"aria-live",o=e[0]())},m(e,o){R(e,t,o),i&&i.m(t,null),S(t,n),c&&c.m(t,null),s=!0},p(e,[n]){i&&i.p&&(!s||16384&n)&&g(i,r,e,e[14],s?m(r,e[14],n,Vn):y(e[14]),Kn),c&&c.p&&(!s||16384&n)&&g(c,a,e,e[14],s?m(a,e[14],n,null):y(e[14]),null),(!s||1&n&&o!==(o=e[0]()))&&M(t,"aria-live",o)},i(e){s||(ke(i,e),ke(c,e),s=!0)},o(e){xe(i,e),xe(c,e),s=!1},d(e){e&&P(t),i&&i.d(e),c&&c.d(e)}}}function Yn(e,t,n){let o,s,{$$slots:r={},$$scope:i}=t,{isAnimationFadeIn:a=!0}=t,{isAnimationSlideUp:c=!1}=t,{isToast:l=!1}=t,{isRounded:u=!1}=t,{isBorderAll:d=!1}=t,{isBorderLeft:f=!1}=t,{isBorderRight:p=!1}=t,{isBorderTop:h=!1}=t,{isBorderBottom:m=!1}=t,{isBlockEnd:g=!1}=t,{type:y=""}=t;switch(y){case"warning":s="alert-warning";break;case"dark":s="alert-dark";break;case"error":s="alert-error";break;case"info":s="alert-info";break;case"success":s="alert-success";break;default:s=""}const b=!!l||void 0,v=["alert",s,u?"alert-rounded":"",d?"alert-border-all":"",f?"alert-border-left":"",p?"alert-border-right":"",h?"alert-border-top":"",m?"alert-border-bottom":"",g?"alert-end":"",l?"alert-toast-shadow":"",a&&!c?"fade-in":"",!a&&c?"slide-up":"",a&&c?"slide-up-fade-in":""].filter((e=>e.length)).join(" ");return e.$$set=e=>{"isAnimationFadeIn"in e&&n(3,a=e.isAnimationFadeIn),"isAnimationSlideUp"in e&&n(4,c=e.isAnimationSlideUp),"isToast"in e&&n(5,l=e.isToast),"isRounded"in e&&n(6,u=e.isRounded),"isBorderAll"in e&&n(7,d=e.isBorderAll),"isBorderLeft"in e&&n(8,f=e.isBorderLeft),"isBorderRight"in e&&n(9,p=e.isBorderRight),"isBorderTop"in e&&n(10,h=e.isBorderTop),"isBorderBottom"in e&&n(11,m=e.isBorderBottom),"isBlockEnd"in e&&n(12,g=e.isBlockEnd),"type"in e&&n(13,y=e.type),"$$scope"in e&&n(14,i=e.$$scope)},e.$$.update=()=>{8224&e.$$.dirty&&n(0,o=()=>{let e;return e=l&&"error"===y?"assertive":l?"polite":void 0,e})},[o,b,v,a,c,l,u,d,f,p,h,m,g,y,i,r]}class Xn extends Ie{constructor(e){super(),Pe(this,e,Yn,Qn,a,{isAnimationFadeIn:3,isAnimationSlideUp:4,isToast:5,isRounded:6,isBorderAll:7,isBorderLeft:8,isBorderRight:9,isBorderTop:10,isBorderBottom:11,isBlockEnd:12,type:13})}}function Zn(e){let t,n;return{c(){t=I("img"),l(t.src,n=e[1])||M(t,"src",n),M(t,"class","avatar-image svelte-11b9buf"),M(t,"alt","")},m(e,n){R(e,t,n)},p(e,o){2&o&&!l(t.src,n=e[1])&&M(t,"src",n)},d(e){e&&P(t)}}}function eo(e){let t,n,o,s,r=e[1]&&Zn(e);const i=e[9].default,a=p(i,e,e[8],null);return{c(){t=I("span"),r&&r.c(),n=N(),a&&a.c(),M(t,"class",_(e[2])+" svelte-11b9buf"),M(t,"data-text",o=e[0]||null)},m(e,o){R(e,t,o),r&&r.m(t,null),S(t,n),a&&a.m(t,null),s=!0},p(e,[c]){e[1]?r?r.p(e,c):(r=Zn(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),a&&a.p&&(!s||256&c)&&g(a,i,e,e[8],s?m(i,e[8],c,null):y(e[8]),null),(!s||1&c&&o!==(o=e[0]||null))&&M(t,"data-text",o)},i(e){s||(ke(a,e),s=!0)},o(e){xe(a,e),s=!1},d(e){e&&P(t),r&&r.d(),a&&a.d(e)}}}function to(e,t,n){let{$$slots:o={},$$scope:s}=t,{isRounded:r=!1}=t,{isTransparent:i=!1}=t,{isSquare:a=!1}=t,{type:c=""}=t,{size:l=""}=t,{text:u=""}=t,{imgUrl:d=""}=t;const f=["avatar",r?"avatar-rounded":"",i?"avatar-transparent":"",a?"avatar-square":"",c?`avatar-${c}`:"",l?`avatar-${l}`:""].filter((e=>e)).join(" ");return e.$$set=e=>{"isRounded"in e&&n(3,r=e.isRounded),"isTransparent"in e&&n(4,i=e.isTransparent),"isSquare"in e&&n(5,a=e.isSquare),"type"in e&&n(6,c=e.type),"size"in e&&n(7,l=e.size),"text"in e&&n(0,u=e.text),"imgUrl"in e&&n(1,d=e.imgUrl),"$$scope"in e&&n(8,s=e.$$scope)},[u,d,f,r,i,a,c,l,s,o]}class no extends Ie{constructor(e){super(),Pe(this,e,to,eo,a,{isRounded:3,isTransparent:4,isSquare:5,type:6,size:7,text:0,imgUrl:1})}}function oo(e){let t,o,s,i;const a=e[23].default,c=p(a,e,e[22],null);let l=[{type:e[3]},{class:e[4]},{role:e[1]},{"aria-selected":e[6]},{"aria-controls":e[2]},{"tab-index":e[5]},{disabled:e[0]},e[7]],u={};for(let e=0;e<l.length;e+=1)u=n(u,l[e]);return{c(){t=I("button"),c&&c.c(),B(t,u),J(t,"svelte-jwfndu",!0)},m(n,r){R(n,t,r),c&&c.m(t,null),t.autofocus&&t.focus(),o=!0,s||(i=[U(t,"keydown",e[24]),U(t,"click",e[25]),U(t,"focus",e[26]),U(t,"blur",e[27])],s=!0)},p(e,n){c&&c.p&&(!o||4194304&n)&&g(c,a,e,e[22],o?m(a,e[22],n,null):y(e[22]),null),B(t,u=Te(l,[(!o||8&n)&&{type:e[3]},(!o||16&n)&&{class:e[4]},(!o||2&n)&&{role:e[1]},(!o||64&n)&&{"aria-selected":e[6]},(!o||4&n)&&{"aria-controls":e[2]},(!o||32&n)&&{"tab-index":e[5]},(!o||1&n)&&{disabled:e[0]},128&n&&e[7]])),J(t,"svelte-jwfndu",!0)},i(e){o||(ke(c,e),o=!0)},o(e){xe(c,e),o=!1},d(e){e&&P(t),c&&c.d(e),s=!1,r(i)}}}function so(e){let t,n,o;const s=e[23].default,r=p(s,e,e[22],null);return{c(){t=I("div"),r&&r.c(),M(t,"class",n=_(e[4])+" svelte-jwfndu")},m(e,n){R(e,t,n),r&&r.m(t,null),o=!0},p(e,i){r&&r.p&&(!o||4194304&i)&&g(r,s,e,e[22],o?m(s,e[22],i,null):y(e[22]),null),(!o||16&i&&n!==(n=_(e[4])+" svelte-jwfndu"))&&M(t,"class",n)},i(e){o||(ke(r,e),o=!0)},o(e){xe(r,e),o=!1},d(e){e&&P(t),r&&r.d(e)}}}function ro(e){let t,n,o,s;const r=[so,oo],i=[];function a(e,t){return"faux"===e[3]?0:1}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=D()},m(e,n){i[t].m(e,n),R(e,o,n),s=!0},p(e,[s]){let c=t;t=a(e),t===c?i[t].p(e,s):(we(),xe(i[c],1,1,(()=>{i[c]=null})),$e(),n=i[t],n?n.p(e,s):(n=i[t]=r[t](e),n.c()),ke(n,1),n.m(o.parentNode,o))},i(e){s||(ke(n),s=!0)},o(e){xe(n),s=!1},d(e){i[t].d(e),e&&P(o)}}}function io(e,t,o){let s,r,i;const a=["mode","size","isBordered","isCapsule","isGrouped","isBlock","isLink","isBlank","isDisabled","role","isCircle","isRounded","isSkinned","ariaSelected","ariaControls","tabIndex","css","type"];let c=v(t,a),{$$slots:l={},$$scope:u}=t,{mode:d=""}=t,{size:f=""}=t,{isBordered:p=!1}=t,{isCapsule:h=!1}=t,{isGrouped:m=!1}=t,{isBlock:g=!1}=t,{isLink:y=!1}=t,{isBlank:_=!1}=t,{isDisabled:w=!1}=t,{role:$}=t,{isCircle:k=!1}=t,{isRounded:x=!1}=t,{isSkinned:C=!0}=t,{ariaSelected:E}=t,{ariaControls:T}=t,{tabIndex:S}=t,{css:A=""}=t,{type:O="button"}=t;return e.$$set=e=>{t=n(n({},t),b(e)),o(7,c=v(t,a)),"mode"in e&&o(8,d=e.mode),"size"in e&&o(9,f=e.size),"isBordered"in e&&o(10,p=e.isBordered),"isCapsule"in e&&o(11,h=e.isCapsule),"isGrouped"in e&&o(12,m=e.isGrouped),"isBlock"in e&&o(13,g=e.isBlock),"isLink"in e&&o(14,y=e.isLink),"isBlank"in e&&o(15,_=e.isBlank),"isDisabled"in e&&o(0,w=e.isDisabled),"role"in e&&o(1,$=e.role),"isCircle"in e&&o(16,k=e.isCircle),"isRounded"in e&&o(17,x=e.isRounded),"isSkinned"in e&&o(18,C=e.isSkinned),"ariaSelected"in e&&o(19,E=e.ariaSelected),"ariaControls"in e&&o(2,T=e.ariaControls),"tabIndex"in e&&o(20,S=e.tabIndex),"css"in e&&o(21,A=e.css),"type"in e&&o(3,O=e.type),"$$scope"in e&&o(22,u=e.$$scope)},e.$$.update=()=>{524288&e.$$.dirty&&o(6,s=E||null),1048576&e.$$.dirty&&o(5,r=S||null),2621185&e.$$.dirty&&o(4,i=[C?"btn":"btn-base",d?`btn-${d}`:"",f?`btn-${f}`:"",p?"btn-bordered":"",h?"btn-capsule ":"",m?"btn-grouped":"",g?"btn-block":"",k?"btn-circle":"",x?"btn-rounded":"",w?"disabled":"",_?"btn-blank":"",y?"btn-link":"",A?`${A}`:""].filter((e=>e)).join(" "))},[w,$,T,O,i,r,s,c,d,f,p,h,m,g,y,_,k,x,C,E,S,A,u,l,function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)}]}class ao extends Ie{constructor(e){super(),Pe(this,e,io,ro,a,{mode:8,size:9,isBordered:10,isCapsule:11,isGrouped:12,isBlock:13,isLink:14,isBlank:15,isDisabled:0,role:1,isCircle:16,isRounded:17,isSkinned:18,ariaSelected:19,ariaControls:2,tabIndex:20,css:21,type:3})}}function co(e){let t,n,o,s,r;return{c(){t=I("button"),n=j("svg"),o=j("path"),M(o,"fill","currentColor"),M(o,"d","M.439 21.44a1.5 1.5 0 0 0 2.122 2.121l9.262-9.261a.25.25 0 0 1 .354 0l9.262 9.263a1.5 1.5 0 1 0 2.122-2.121L14.3 12.177a.25.25 0 0 1 0-.354l9.263-9.262A1.5 1.5 0 0 0 21.439.44L12.177 9.7a.25.25 0 0 1-.354 0L2.561.44A1.5 1.5 0 0 0 .439 2.561L9.7 11.823a.25.25 0 0 1 0 .354Z"),M(n,"class","close svelte-kk9uos"),M(n,"viewBox","0 0 24 24"),M(n,"aria-hidden","true"),H(n,"color",e[1],!1),M(t,"class",_(e[2])+" svelte-kk9uos"),M(t,"aria-label","Close")},m(i,a){R(i,t,a),S(t,n),S(n,o),s||(r=U(t,"click",e[4]),s=!0)},p(e,t){2&t&&H(n,"color",e[1],!1)},d(e){e&&P(t),s=!1,r()}}}function lo(t){let n,o,s;return{c(){n=I("div"),o=j("svg"),s=j("path"),M(s,"fill","currentColor"),M(s,"d","M.439 21.44a1.5 1.5 0 0 0 2.122 2.121l9.262-9.261a.25.25 0 0 1 .354 0l9.262 9.263a1.5 1.5 0 1 0 2.122-2.121L14.3 12.177a.25.25 0 0 1 0-.354l9.263-9.262A1.5 1.5 0 0 0 21.439.44L12.177 9.7a.25.25 0 0 1-.354 0L2.561.44A1.5 1.5 0 0 0 .439 2.561L9.7 11.823a.25.25 0 0 1 0 .354Z"),M(o,"class","close svelte-kk9uos"),M(o,"viewBox","0 0 24 24"),M(o,"aria-hidden","true"),M(n,"class",_(t[2])+" svelte-kk9uos")},m(e,t){R(e,n,t),S(n,o),S(o,s)},p:e,d(e){e&&P(n)}}}function uo(t){let n;function o(e,t){return e[0]?lo:co}let s=o(t),r=s(t);return{c(){r.c(),n=D()},m(e,t){r.m(e,t),R(e,n,t)},p(e,[t]){s===(s=o(e))&&r?r.p(e,t):(r.d(1),r=s(e),r&&(r.c(),r.m(n.parentNode,n)))},i:e,o:e,d(e){r.d(e),e&&P(n)}}}function fo(e,t,n){let{size:o=""}=t,{isFaux:s=!1}=t,{color:r="inherit"}=t;const i=["close-button",o?`close-button-${o}`:""].filter((e=>e)).join(" ");return e.$$set=e=>{"size"in e&&n(3,o=e.size),"isFaux"in e&&n(0,s=e.isFaux),"color"in e&&n(1,r=e.color)},[s,r,i,o,function(t){ne.call(this,e,t)}]}class po extends Ie{constructor(e){super(),Pe(this,e,fo,uo,a,{size:3,isFaux:0,color:1})}}var ho=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];function mo(e){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=e,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}function go(e,t){return n=(t||document).querySelectorAll(e),Array.prototype.slice.call(n);var n}function yo(e){(e.querySelector("[autofocus]")||e).focus()}function bo(){go("[data-a11y-dialog]").forEach((function(e){new mo(e)}))}mo.prototype.create=function(){return this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=go('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(e){e.addEventListener("click",this._show)}.bind(this)),this._closers=go("[data-a11y-dialog-hide]",this.$el).concat(go('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(e){e.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},mo.prototype.show=function(e){return this.shown||(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,yo(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",e)),this},mo.prototype.hide=function(e){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",e),this):this},mo.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(e){e.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(e){e.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},mo.prototype.on=function(e,t){return void 0===this._listeners[e]&&(this._listeners[e]=[]),this._listeners[e].push(t),this},mo.prototype.off=function(e,t){var n=(this._listeners[e]||[]).indexOf(t);return n>-1&&this._listeners[e].splice(n,1),this},mo.prototype._fire=function(e,t){var n=this._listeners[e]||[],o=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(o),n.forEach(function(e){e(this.$el,t)}.bind(this))},mo.prototype._bindKeypress=function(e){this.$el.contains(document.activeElement)&&(this.shown&&"Escape"===e.key&&"alertdialog"!==this.$el.getAttribute("role")&&(e.preventDefault(),this.hide(e)),this.shown&&"Tab"===e.key&&function(e,t){var n=function(e){return go(ho.join(","),e).filter((function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}))}(e),o=n.indexOf(document.activeElement);t.shiftKey&&0===o?(n[n.length-1].focus(),t.preventDefault()):t.shiftKey||o!==n.length-1||(n[0].focus(),t.preventDefault())}(this.$el,e))},mo.prototype._maintainFocus=function(e){!this.shown||e.target.closest('[aria-modal="true"]')||e.target.closest("[data-a11y-dialog-ignore-focus-trap]")||yo(this.$el)},"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",bo):window.requestAnimationFrame?window.requestAnimationFrame(bo):window.setTimeout(bo,16));const vo=e=>({}),_o=e=>({}),wo=e=>({}),$o=e=>({});function ko(t){let n,o,s,a,c,l,u,d,f,h,b,v,_="first"===t[4]&&xo(t);const w=t[16].default,$=p(w,t,t[15],null);let k="last"===t[4]&&Co(t);return{c(){n=I("div"),o=I("div"),s=N(),a=I("div"),_&&_.c(),c=N(),l=I("p"),u=L(t[2]),d=N(),$&&$.c(),f=N(),k&&k.c(),M(o,"data-a11y-dialog-hide",""),M(o,"tabindex","-1"),M(o,"class",t[7].overlay),M(l,"id",t[8]),M(l,"class",t[7].title),M(a,"role","document"),M(a,"class",t[7].document),M(n,"id",t[0]),M(n,"class",t[7].container),M(n,"role",t[9]),M(n,"aria-hidden","true"),M(n,"aria-labelledby",t[8])},m(r,p){var m,g;R(r,n,p),S(n,o),S(n,s),S(n,a),_&&_.m(a,null),S(a,c),S(a,l),S(l,u),S(a,d),$&&$.m(a,null),S(a,f),k&&k.m(a,null),t[17](n),h=!0,b||(v=[U(o,"click",(g=function(){i("alertdialog"===t[1]?void 0:t[11])&&("alertdialog"===t[1]?void 0:t[11]).apply(this,arguments)},function(e){return e.preventDefault(),g.call(this,e)})),(m=t[10].call(null,n),m&&i(m.destroy)?m.destroy:e)],b=!0)},p(e,o){"first"===(t=e)[4]?_?(_.p(t,o),16&o&&ke(_,1)):(_=xo(t),_.c(),ke(_,1),_.m(a,c)):_&&(we(),xe(_,1,1,(()=>{_=null})),$e()),(!h||4&o)&&q(u,t[2]),$&&$.p&&(!h||32768&o)&&g($,w,t,t[15],h?m(w,t[15],o,null):y(t[15]),null),"last"===t[4]?k?(k.p(t,o),16&o&&ke(k,1)):(k=Co(t),k.c(),ke(k,1),k.m(a,null)):k&&(we(),xe(k,1,1,(()=>{k=null})),$e()),(!h||1&o)&&M(n,"id",t[0])},i(e){h||(ke(_),ke($,e),ke(k),h=!0)},o(e){xe(_),xe($,e),xe(k),h=!1},d(e){e&&P(n),_&&_.d(),$&&$.d(e),k&&k.d(),t[17](null),b=!1,r(v)}}}function xo(t){let n,o,s,r;const i=t[16].closeButtonContent,a=p(i,t,t[15],$o),c=a||function(t){let n,o="";return{c(){n=L(o)},m(e,t){R(e,n,t)},p:e,d(e){e&&P(n)}}}();return{c(){n=I("button"),c&&c.c(),M(n,"data-a11y-dialog-hide",""),M(n,"type","button"),M(n,"class",t[7].closeButton),M(n,"aria-label",t[3])},m(e,i){R(e,n,i),c&&c.m(n,null),o=!0,s||(r=U(n,"click",t[11]),s=!0)},p(e,t){a&&a.p&&(!o||32768&t)&&g(a,i,e,e[15],o?m(i,e[15],t,wo):y(e[15]),$o),(!o||8&t)&&M(n,"aria-label",e[3])},i(e){o||(ke(c,e),o=!0)},o(e){xe(c,e),o=!1},d(e){e&&P(n),c&&c.d(e),s=!1,r()}}}function Co(t){let n,o,s,r;const i=t[16].closeButtonContent,a=p(i,t,t[15],_o),c=a||function(t){let n,o="";return{c(){n=L(o)},m(e,t){R(e,n,t)},p:e,d(e){e&&P(n)}}}();return{c(){n=I("button"),c&&c.c(),M(n,"data-a11y-dialog-hide",""),M(n,"type","button"),M(n,"class",t[7].closeButton),M(n,"aria-label",t[3])},m(e,i){R(e,n,i),c&&c.m(n,null),o=!0,s||(r=U(n,"click",t[11]),s=!0)},p(e,t){a&&a.p&&(!o||32768&t)&&g(a,i,e,e[15],o?m(i,e[15],t,vo):y(e[15]),_o),(!o||8&t)&&M(n,"aria-label",e[3])},i(e){o||(ke(c,e),o=!0)},o(e){xe(c,e),o=!1},d(e){e&&P(n),c&&c.d(e),s=!1,r()}}}function Eo(e){let t,n,o=e[6]&&ko(e);return{c(){o&&o.c(),t=D()},m(e,s){o&&o.m(e,s),R(e,t,s),n=!0},p(e,[n]){e[6]?o?(o.p(e,n),64&n&&ke(o,1)):(o=ko(e),o.c(),ke(o,1),o.m(t.parentNode,t)):o&&(we(),xe(o,1,1,(()=>{o=null})),$e())},i(e){n||(ke(o),n=!0)},o(e){xe(o),n=!1},d(e){o&&o.d(e),e&&P(t)}}}function To(e,t,n){let{$$slots:o={},$$scope:s}=t;const r=te();let{id:i}=t,{titleId:a=""}=t,{role:c="dialog"}=t,{dialogRoot:l}=t,{title:u}=t,{closeButtonLabel:d="Close this dialog window"}=t,{closeButtonPosition:f="first"}=t,{classNames:p={}}=t;const h={container:"dialog-container",document:"dialog-content",overlay:"dialog-overlay",element:"dialog-element",title:"dialog-title h4",closeButton:"dialog-close",...p};let m,g;const y=l||"document.body",b=a||`${i}-title`,v=["dialog","alertdialog"].includes(c)?c:"dialog";let _=!1;var w;ee((()=>n(6,_=!0))),w=()=>{m&&m.destroy()},Z().$$.on_destroy.push(w);const $=async()=>{await(le(),ae),m=new mo(g),r("instance",{instance:m})};return e.$$set=e=>{"id"in e&&n(0,i=e.id),"titleId"in e&&n(12,a=e.titleId),"role"in e&&n(1,c=e.role),"dialogRoot"in e&&n(13,l=e.dialogRoot),"title"in e&&n(2,u=e.title),"closeButtonLabel"in e&&n(3,d=e.closeButtonLabel),"closeButtonPosition"in e&&n(4,f=e.closeButtonPosition),"classNames"in e&&n(14,p=e.classNames),"$$scope"in e&&n(15,s=e.$$scope)},[i,c,u,d,f,g,_,h,b,v,e=>{(async e=>{document.querySelector(y).appendChild(e),$()})(e)},()=>{m.hide()},a,l,p,s,o,function(e){se[e?"unshift":"push"]((()=>{g=e,n(5,g)}))}]}class So extends Ie{constructor(e){super(),Pe(this,e,To,Eo,a,{id:0,titleId:12,role:1,dialogRoot:13,title:2,closeButtonLabel:3,closeButtonPosition:4,classNames:14})}}const Ao=e=>({}),Oo=e=>({slot:"closeButtonContent"});function Ro(e){let t;const n=e[13].default,o=p(n,e,e[14],null);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,s){o&&o.p&&(!t||16384&s)&&g(o,n,e,e[14],t?m(n,e[14],s,null):y(e[14]),null)},i(e){t||(ke(o,e),t=!0)},o(e){xe(o,e),t=!1},d(e){o&&o.d(e)}}}function Po(t){let n;const o=t[13].closeButtonContent,s=p(o,t,t[14],Oo),r=s||function(t){let n,o;return n=new po({props:{isFaux:!0,size:"large"}}),{c(){Ae(n.$$.fragment)},m(e,t){Oe(n,e,t),o=!0},p:e,i(e){o||(ke(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){Re(n,e)}}}();return{c(){r&&r.c()},m(e,t){r&&r.m(e,t),n=!0},p(e,t){s&&s.p&&(!n||16384&t)&&g(s,o,e,e[14],n?m(o,e[14],t,Ao):y(e[14]),Oo)},i(e){n||(ke(r,e),n=!0)},o(e){xe(r,e),n=!1},d(e){r&&r.d(e)}}}function Io(e){let t,n;return t=new So({props:{id:e[0],dialogRoot:e[2],closeButtonLabel:e[5],closeButtonPosition:e[6],title:e[1],titleId:e[4],role:e[3],classNames:e[7](),$$slots:{closeButtonContent:[Po],default:[Ro]},$$scope:{ctx:e}}}),t.$on("instance",e[8]),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},p(e,[n]){const o={};1&n&&(o.id=e[0]),4&n&&(o.dialogRoot=e[2]),32&n&&(o.closeButtonLabel=e[5]),64&n&&(o.closeButtonPosition=e[6]),2&n&&(o.title=e[1]),16&n&&(o.titleId=e[4]),8&n&&(o.role=e[3]),128&n&&(o.classNames=e[7]()),16384&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function jo(e,t,n){let o,{$$slots:s={},$$scope:r}=t;const i=te();let a,{id:c}=t,{title:l}=t,{dialogRoot:u}=t,{role:d="dialog"}=t,{titleId:f=""}=t,{closeButtonLabel:p="Close button"}=t,{closeButtonPosition:h="first"}=t,{drawerPlacement:m=""}=t,{isAnimationFadeIn:g=!1}=t,{isAnimationSlideUp:y=!1}=t;let{classNames:b={}}=t;const v=["dialog-content",g&&y?"dialog-slide-up-fade-in":"",!g&&y?"dialog-slide-up":"",g&&!y?"dialog-fade-in":"",m.length?"drawer-content":""].filter((e=>e)).join(" "),_={container:["dialog",m?`drawer-${m}`:""].filter((e=>e)).join(" "),document:v,overlay:"dialog-overlay",title:"h4 mbe16",closeButton:"dialog-close dialog-close-button"};return e.$$set=e=>{"id"in e&&n(0,c=e.id),"title"in e&&n(1,l=e.title),"dialogRoot"in e&&n(2,u=e.dialogRoot),"role"in e&&n(3,d=e.role),"titleId"in e&&n(4,f=e.titleId),"closeButtonLabel"in e&&n(5,p=e.closeButtonLabel),"closeButtonPosition"in e&&n(6,h=e.closeButtonPosition),"drawerPlacement"in e&&n(9,m=e.drawerPlacement),"isAnimationFadeIn"in e&&n(10,g=e.isAnimationFadeIn),"isAnimationSlideUp"in e&&n(11,y=e.isAnimationSlideUp),"classNames"in e&&n(12,b=e.classNames),"$$scope"in e&&n(14,r=e.$$scope)},e.$$.update=()=>{4096&e.$$.dirty&&n(7,o=()=>({..._,...b}))},[c,l,u,d,f,p,h,o,e=>{a=e.detail.instance,i("instance",{instance:a})},m,g,y,b,s,r]}class Lo extends Ie{constructor(e){super(),Pe(this,e,jo,Io,a,{id:0,title:1,dialogRoot:2,role:3,titleId:4,closeButtonLabel:5,closeButtonPosition:6,drawerPlacement:9,isAnimationFadeIn:10,isAnimationSlideUp:11,classNames:12})}}const No=e=>({}),Do=e=>({}),Uo=e=>({}),Mo=e=>({});function Bo(t){let o,s,i,a=[{id:t[2]},{type:t[15]},{value:t[0]},{class:t[13]},{disabled:t[8]},t[16]],c={};for(let e=0;e<a.length;e+=1)c=n(c,a[e]);return{c(){o=I("input"),B(o,c),J(o,"svelte-5ha1y2",!0)},m(e,n){R(e,o,n),o.value=c.value,o.autofocus&&o.focus(),s||(i=[U(o,"blur",t[36]),U(o,"change",t[37]),U(o,"input",t[42]),U(o,"click",t[38]),U(o,"focus",t[39])],s=!0)},p(e,t){B(o,c=Te(a,[4&t[0]&&{id:e[2]},32768&t[0]&&{type:e[15]},1&t[0]&&o.value!==e[0]&&{value:e[0]},8192&t[0]&&{class:e[13]},256&t[0]&&{disabled:e[8]},65536&t[0]&&e[16]])),"value"in c&&(o.value=c.value),J(o,"svelte-5ha1y2",!0)},i:e,o:e,d(e){e&&P(o),s=!1,r(i)}}}function Fo(e){let t,o,s,i,a,c,l,u;const d=e[27].addonLeft,f=p(d,e,e[26],Mo);let h=[{id:e[2]},{type:e[15]},{value:e[0]},{class:e[13]},{disabled:e[8]},e[16]],b={};for(let e=0;e<h.length;e+=1)b=n(b,h[e]);const v=e[27].addonRight,w=p(v,e,e[26],Do);return{c(){t=I("div"),f&&f.c(),o=N(),s=I("input"),i=N(),w&&w.c(),B(s,b),J(s,"svelte-5ha1y2",!0),M(t,"class",a=_(e[10]())+" svelte-5ha1y2")},m(n,r){R(n,t,r),f&&f.m(t,null),S(t,o),S(t,s),s.value=b.value,s.autofocus&&s.focus(),S(t,i),w&&w.m(t,null),c=!0,l||(u=[U(s,"blur",e[32]),U(s,"change",e[33]),U(s,"input",e[41]),U(s,"click",e[34]),U(s,"focus",e[35])],l=!0)},p(e,n){f&&f.p&&(!c||67108864&n[0])&&g(f,d,e,e[26],c?m(d,e[26],n,Uo):y(e[26]),Mo),B(s,b=Te(h,[(!c||4&n[0])&&{id:e[2]},(!c||32768&n[0])&&{type:e[15]},(!c||1&n[0]&&s.value!==e[0])&&{value:e[0]},(!c||8192&n[0])&&{class:e[13]},(!c||256&n[0])&&{disabled:e[8]},65536&n[0]&&e[16]])),"value"in b&&(s.value=b.value),J(s,"svelte-5ha1y2",!0),w&&w.p&&(!c||67108864&n[0])&&g(w,v,e,e[26],c?m(v,e[26],n,No):y(e[26]),Do),(!c||1024&n[0]&&a!==(a=_(e[10]())+" svelte-5ha1y2"))&&M(t,"class",a)},i(e){c||(ke(f,e),ke(w,e),c=!0)},o(e){xe(f,e),xe(w,e),c=!1},d(e){e&&P(t),f&&f.d(e),w&&w.d(e),l=!1,r(u)}}}function qo(t){let o,s,i,a=[{id:t[2]},{class:t[13]},t[16]],c={};for(let e=0;e<a.length;e+=1)c=n(c,a[e]);return{c(){o=I("textarea"),B(o,c),J(o,"svelte-5ha1y2",!0)},m(e,n){R(e,o,n),o.autofocus&&o.focus(),z(o,t[0]),s||(i=[U(o,"blur",t[28]),U(o,"change",t[29]),U(o,"input",t[40]),U(o,"click",t[30]),U(o,"focus",t[31])],s=!0)},p(e,t){B(o,c=Te(a,[4&t[0]&&{id:e[2]},8192&t[0]&&{class:e[13]},65536&t[0]&&e[16]])),1&t[0]&&z(o,e[0]),J(o,"svelte-5ha1y2",!0)},i:e,o:e,d(e){e&&P(o),s=!1,r(i)}}}function zo(e){let t,n,o;return{c(){t=I("span"),n=L(e[3]),M(t,"class",o=_(e[11]())+" svelte-5ha1y2")},m(e,o){R(e,t,o),S(t,n)},p(e,s){8&s[0]&&q(n,e[3]),2048&s[0]&&o!==(o=_(e[11]())+" svelte-5ha1y2")&&M(t,"class",o)},d(e){e&&P(t)}}}function Ho(e){let t,n,o;return{c(){t=I("span"),n=L(e[4]),M(t,"role","status"),M(t,"aria-live","polite"),M(t,"class",o=_(e[12]())+" svelte-5ha1y2")},m(e,o){R(e,t,o),S(t,n)},p(e,s){16&s[0]&&q(n,e[4]),4096&s[0]&&o!==(o=_(e[12]())+" svelte-5ha1y2")&&M(t,"class",o)},d(e){e&&P(t)}}}function Jo(e){let t,n,o,s,r,i,a,c,l;const u=[qo,Fo,Bo],d=[];function f(e,t){return"textarea"==e[9]?0:e[5]||e[6]?1:2}function p(e,t){return e[7]?Ho:e[3]?zo:void 0}i=f(e),a=d[i]=u[i](e);let h=p(e),m=h&&h(e);return{c(){t=I("div"),n=I("label"),o=L(e[1]),r=N(),a.c(),c=N(),m&&m.c(),M(n,"class",s=_(e[14])+" svelte-5ha1y2"),M(n,"for",e[2]),M(t,"class","w-100")},m(e,s){R(e,t,s),S(t,n),S(n,o),S(t,r),d[i].m(t,null),S(t,c),m&&m.m(t,null),l=!0},p(e,r){(!l||2&r[0])&&q(o,e[1]),(!l||16384&r[0]&&s!==(s=_(e[14])+" svelte-5ha1y2"))&&M(n,"class",s),(!l||4&r[0])&&M(n,"for",e[2]);let g=i;i=f(e),i===g?d[i].p(e,r):(we(),xe(d[g],1,1,(()=>{d[g]=null})),$e(),a=d[i],a?a.p(e,r):(a=d[i]=u[i](e),a.c()),ke(a,1),a.m(t,c)),h===(h=p(e))&&m?m.p(e,r):(m&&m.d(1),m=h&&h(e),m&&(m.c(),m.m(t,null)))},i(e){l||(ke(a),l=!0)},o(e){xe(a),l=!1},d(e){e&&P(t),d[i].d(),m&&m.d()}}}function Go(e,t,o){let s,r,i,a,c,l;const u=["label","id","labelCss","isLabelHidden","helpText","invalidText","hasLeftAddon","hasRightAddon","isInvalid","isInline","isRounded","isDisabled","css","isSkinned","isUnderlinedWithBackground","isUnderlined","size","value","type"];let d=v(t,u),{$$slots:f={},$$scope:p}=t,{label:h=""}=t,{id:m=""}=t,{labelCss:g=""}=t,{isLabelHidden:y=!1}=t,{helpText:_=""}=t,{invalidText:w=""}=t,{hasLeftAddon:$=!1}=t,{hasRightAddon:k=!1}=t,{isInvalid:x=!1}=t,{isInline:C=!1}=t,{isRounded:E=!1}=t,{isDisabled:T}=t,{css:S=""}=t,{isSkinned:A=!0}=t,{isUnderlinedWithBackground:O=!1}=t,{isUnderlined:R=!1}=t,{size:P=""}=t,{value:I=""}=t,{type:j="text"}=t;return e.$$set=e=>{t=n(n({},t),b(e)),o(16,d=v(t,u)),"label"in e&&o(1,h=e.label),"id"in e&&o(2,m=e.id),"labelCss"in e&&o(17,g=e.labelCss),"isLabelHidden"in e&&o(18,y=e.isLabelHidden),"helpText"in e&&o(3,_=e.helpText),"invalidText"in e&&o(4,w=e.invalidText),"hasLeftAddon"in e&&o(5,$=e.hasLeftAddon),"hasRightAddon"in e&&o(6,k=e.hasRightAddon),"isInvalid"in e&&o(7,x=e.isInvalid),"isInline"in e&&o(19,C=e.isInline),"isRounded"in e&&o(20,E=e.isRounded),"isDisabled"in e&&o(8,T=e.isDisabled),"css"in e&&o(21,S=e.css),"isSkinned"in e&&o(22,A=e.isSkinned),"isUnderlinedWithBackground"in e&&o(23,O=e.isUnderlinedWithBackground),"isUnderlined"in e&&o(24,R=e.isUnderlined),"size"in e&&o(25,P=e.size),"value"in e&&o(0,I=e.value),"type"in e&&o(9,j=e.type),"$$scope"in e&&o(26,p=e.$$scope)},e.$$.update=()=>{1&e.$$.dirty[0]&&(I||o(0,I="")),512&e.$$.dirty[0]&&o(15,s=j),34472064&e.$$.dirty[0]&&o(14,r=["label",x?"label-error":"",C?"label-inline":"",P?`label-${P}`:"",y?"screenreader-only":"",g||""].filter((e=>e)).join(" ")),66585056&e.$$.dirty[0]&&o(13,i=[A?"input":"input-base",E?"input-rounded":"",R?"input-underlined":"",$?"input-has-left-addon":"",k?"input-has-right-addon":"",T?"disabled":"",x?"input-error":"",C?"input-inline":"",O?"input-underlined-bg":"",S||"",P?`input-${P}`:""].filter((e=>e)).join(" ")),33554432&e.$$.dirty[0]&&o(12,a=()=>P?`field-error-${P}`:"field-error"),33554432&e.$$.dirty[0]&&o(11,c=()=>P?`field-help-${P}`:"field-help")},o(10,l=()=>"input-addon-container"),[I,h,m,_,w,$,k,x,T,j,l,c,a,i,r,s,d,g,y,C,E,S,A,O,R,P,p,f,function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(t){ne.call(this,e,t)},function(){I=this.value,o(0,I)},e=>o(0,I=e.target.value),e=>o(0,I=e.target.value)]}class Wo extends Ie{constructor(e){super(),Pe(this,e,Go,Jo,a,{label:1,id:2,labelCss:17,isLabelHidden:18,helpText:3,invalidText:4,hasLeftAddon:5,hasRightAddon:6,isInvalid:7,isInline:19,isRounded:20,isDisabled:8,css:21,isSkinned:22,isUnderlinedWithBackground:23,isUnderlined:24,size:25,value:0,type:9},null,[-1,-1])}}function Vo(e){let t,n,o;const s=e[5].default,r=p(s,e,e[4],null);return{c(){t=I("div"),r&&r.c(),M(t,"class",n=_(e[0])+" svelte-1yz2082")},m(e,n){R(e,t,n),r&&r.m(t,null),o=!0},p(e,[i]){r&&r.p&&(!o||16&i)&&g(r,s,e,e[4],o?m(s,e[4],i,null):y(e[4]),null),(!o||1&i&&n!==(n=_(e[0])+" svelte-1yz2082"))&&M(t,"class",n)},i(e){o||(ke(r,e),o=!0)},o(e){xe(r,e),o=!1},d(e){e&&P(t),r&&r.d(e)}}}function Ko(e,t,n){let o,{$$slots:s={},$$scope:r}=t,{css:i=""}=t,{addonLeft:a=!1}=t,{addonRight:c=!1}=t;return e.$$set=e=>{"css"in e&&n(1,i=e.css),"addonLeft"in e&&n(2,a=e.addonLeft),"addonRight"in e&&n(3,c=e.addonRight),"$$scope"in e&&n(4,r=e.$$scope)},e.$$.update=()=>{14&e.$$.dirty&&n(0,o=[a?"input-addon-left":"",c?"input-addon-right":"",i?`${i}`:""].filter((e=>e)).join(" "))},[o,i,a,c,r,s]}class Qo extends Ie{constructor(e){super(),Pe(this,e,Ko,Vo,a,{css:1,addonLeft:2,addonRight:3})}}function Yo(t){let n,o,s,r,i,a,c,l,u,d,f,p,h,m,g;return{c(){n=I("p"),n.textContent="Spotify's policy does not allow for certifying hobby projects, so I cannot build an application with one included \n        and reusable by everyone. You must to create a Spotify Client ID in order to let this tool read your current playing track.",o=N(),s=I("ol"),r=I("li"),r.innerHTML='Go to the \n            <a href="https://developer.spotify.com/console/" rel="noreferer noopener" target="_blank">Spotify Developer Console</a>\n            and log in with your Spotify account.',i=N(),a=I("li"),a.textContent='Go to "Dashboard", then "Create An App".',c=N(),l=I("li"),l.textContent="Enter a name and description (anything goes), then click create.",u=N(),d=I("li"),f=L('Click on "Edit Settings", and find "Redirect URIs". Add this tool '),p=I("code"),p.textContent=`${window.location.origin}${window.location.pathname}#spotify`,h=L(" \n            to the list. Make sure you enter the URL exactly as shown here, without leading or trailing spaces, and include the trailing slash."),m=N(),g=I("li"),g.textContent='On the App\'s information page, you will find the "Client ID". Copy its value into the box on this page.',M(n,"class","svelte-y99fuh"),M(r,"class","svelte-y99fuh"),M(a,"class","svelte-y99fuh"),M(l,"class","svelte-y99fuh"),M(d,"class","svelte-y99fuh"),M(g,"class","svelte-y99fuh")},m(e,t){R(e,n,t),R(e,o,t),R(e,s,t),S(s,r),S(s,i),S(s,a),S(s,c),S(s,l),S(s,u),S(s,d),S(d,f),S(d,p),S(d,h),S(s,m),S(s,g)},p:e,d(e){e&&P(n),e&&P(o),e&&P(s)}}}function Xo(e){let t,n,o,s,r,i,a;function c(t){e[5](t)}let l={label:"Spotify Client ID",placeholder:"0123456789abcdef0123456789abcdef",isInvalid:!rs(e[3]),invalidText:"That does not look like a correct Spotify client ID.",hasRightAddon:!0,$$slots:{addonRight:[ts]},$$scope:{ctx:e}};return void 0!==e[3]&&(l.value=e[3]),n=new Wo({props:l}),se.push((()=>Se(n,"value",c))),i=new ao({props:{disabled:!rs(e[3]),style:"background: var(--spotify-green);",$$slots:{default:[ns]},$$scope:{ctx:e}}}),i.$on("click",hn),{c(){t=I("div"),Ae(n.$$.fragment),s=N(),r=I("div"),Ae(i.$$.fragment),M(t,"class","form-item mbe8"),M(r,"class","form-item mbe8")},m(e,o){R(e,t,o),Oe(n,t,null),R(e,s,o),R(e,r,o),Oe(i,r,null),a=!0},p(e,t){const s={};8&t&&(s.isInvalid=!rs(e[3])),66&t&&(s.$$scope={dirty:t,ctx:e}),!o&&8&t&&(o=!0,s.value=e[3],de((()=>o=!1))),n.$set(s);const r={};8&t&&(r.disabled=!rs(e[3])),64&t&&(r.$$scope={dirty:t,ctx:e}),i.$set(r)},i(e){a||(ke(n.$$.fragment,e),ke(i.$$.fragment,e),a=!0)},o(e){xe(n.$$.fragment,e),xe(i.$$.fragment,e),a=!1},d(e){e&&P(t),Re(n),e&&P(s),e&&P(r),Re(i)}}}function Zo(e){let t,n,o,s,r,i,a,c,l=e[2].display_name+"";return o=new no({props:{imgUrl:e[2].images[0]?.url}}),a=new ao({props:{$$slots:{default:[os]},$$scope:{ctx:e}}}),a.$on("click",bn),{c(){t=I("div"),n=L("Signed in to Spotify as \n        "),Ae(o.$$.fragment),s=N(),r=L(l),i=N(),Ae(a.$$.fragment),M(t,"class","form-item")},m(e,l){R(e,t,l),S(t,n),Oe(o,t,null),S(t,s),S(t,r),R(e,i,l),Oe(a,e,l),c=!0},p(e,t){const n={};4&t&&(n.imgUrl=e[2].images[0]?.url),o.$set(n),(!c||4&t)&&l!==(l=e[2].display_name+"")&&q(r,l);const s={};64&t&&(s.$$scope={dirty:t,ctx:e}),a.$set(s)},i(e){c||(ke(o.$$.fragment,e),ke(a.$$.fragment,e),c=!0)},o(e){xe(o.$$.fragment,e),xe(a.$$.fragment,e),c=!1},d(e){e&&P(t),Re(o),e&&P(i),Re(a,e)}}}function es(e){let t;return{c(){t=L("Where do I get this?")},m(e,n){R(e,t,n)},d(e){e&&P(t)}}}function ts(e){let t,n;return t=new ao({props:{slot:"addonRight",$$slots:{default:[es]},$$scope:{ctx:e}}}),t.$on("click",(function(){i(e[1]&&e[1].show())&&(e[1]&&e[1].show()).apply(this,arguments)})),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},p(n,o){e=n;const s={};64&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function ns(t){let n,o;return{c(){n=I("iconify-icon"),o=L("\n            Sign in to Spotify"),F(n,"icon","fa-brands:spotify"),F(n,"class","spotify-icon svelte-y99fuh")},m(e,t){R(e,n,t),R(e,o,t)},p:e,d(e){e&&P(n),e&&P(o)}}}function os(e){let t;return{c(){t=L("Sign out")},m(e,n){R(e,t,n)},d(e){e&&P(t)}}}function ss(e){let t,n,o,s,r,i,a,c,l,u;r=new Lo({props:{id:"spotify-info",dialogRoot:"#dialog-root",isAnimationFadeIn:!0,isAnimationSlideUp:!0,title:"Spotify Client ID",$$slots:{default:[Yo]},$$scope:{ctx:e}}}),r.$on("instance",e[4]);const d=[Zo,Xo],f=[];function p(e,t){return e[0]&&e[2]?0:1}return a=p(e),c=f[a]=d[a](e),{c(){t=I("h2"),t.textContent="Connect Spotify",n=N(),o=I("p"),o.textContent="Connect your Spotify account so that this tool can read your player activity.",s=N(),Ae(r.$$.fragment),i=N(),c.c(),l=D(),M(o,"class","mbe16 svelte-y99fuh")},m(e,c){R(e,t,c),R(e,n,c),R(e,o,c),R(e,s,c),Oe(r,e,c),R(e,i,c),f[a].m(e,c),R(e,l,c),u=!0},p(e,[t]){const n={};64&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);let o=a;a=p(e),a===o?f[a].p(e,t):(we(),xe(f[o],1,1,(()=>{f[o]=null})),$e(),c=f[a],c?c.p(e,t):(c=f[a]=d[a](e),c.c()),ke(c,1),c.m(l.parentNode,l))},i(e){u||(ke(r.$$.fragment,e),ke(c),u=!0)},o(e){xe(r.$$.fragment,e),xe(c),u=!1},d(e){e&&P(t),e&&P(n),e&&P(o),e&&P(s),Re(r,e),e&&P(i),f[a].d(e),e&&P(l)}}}function rs(e){return e&&!!e.match(/^[a-z0-9]{32}$/)}function is(e,t,n){let o,s;f(e,nt,(e=>n(0,o=e))),f(e,Je,(e=>n(3,s=e)));let r,i=null;return e.$$.update=()=>{1&e.$$.dirty&&(async e=>e?await async function(){return vn?await _n.getMe():null}():null)(o).then((e=>n(2,r=e)))},[o,i,r,s,e=>n(1,i=e.detail.instance),function(e){s=e,Je.set(s)}]}class as extends Ie{constructor(e){super(),Pe(this,e,is,ss,a,{})}}function cs(e){let t,n,o,s,r;return n=new ao({props:{css:"mbe8",style:"background: var(--twitch-purple);",$$slots:{default:[us]},$$scope:{ctx:e}}}),n.$on("click",On),{c(){t=I("div"),Ae(n.$$.fragment),o=N(),s=I("p"),s.textContent="Bot messages will be sent from the Twitch account you sign in to. If you'd like to use a dedicated bot account, sign in to that \n        instead of your streaming account.",M(t,"class","form-item mbe8")},m(e,i){R(e,t,i),Oe(n,t,null),S(t,o),S(t,s),r=!0},p(e,t){const o={};64&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){r||(ke(n.$$.fragment,e),r=!0)},o(e){xe(n.$$.fragment,e),r=!1},d(e){e&&P(t),Re(n)}}}function ls(e){let t,n,o,s,r,i,a,c,l,u,d,f,p,h,m,g,y=e[2].display_name+"";function b(t){e[4](t)}o=new no({props:{imgUrl:e[2].profile_image_url}}),a=new ao({props:{css:"mbe8",$$slots:{default:[ds]},$$scope:{ctx:e}}}),a.$on("click",Rn);let v={label:"Listen for commands in channel"};function _(t){e[5](t)}void 0!==e[3]&&(v.value=e[3]),u=new Wo({props:v}),se.push((()=>Se(u,"value",b)));let w={label:"Command to listen for",hasLeftAddon:!0,$$slots:{addonLeft:[ps]},$$scope:{ctx:e}};return void 0!==e[0]&&(w.value=e[0]),h=new Wo({props:w}),se.push((()=>Se(h,"value",_))),{c(){t=I("div"),n=L("Signed in to Twitch as \n        "),Ae(o.$$.fragment),s=N(),r=L(y),i=N(),Ae(a.$$.fragment),c=N(),l=I("div"),Ae(u.$$.fragment),f=N(),p=I("div"),Ae(h.$$.fragment),M(t,"class","form-item"),M(l,"class","form-item mbe8"),M(p,"class","form-item mbe8")},m(e,d){R(e,t,d),S(t,n),Oe(o,t,null),S(t,s),S(t,r),R(e,i,d),Oe(a,e,d),R(e,c,d),R(e,l,d),Oe(u,l,null),R(e,f,d),R(e,p,d),Oe(h,p,null),g=!0},p(e,t){const n={};4&t&&(n.imgUrl=e[2].profile_image_url),o.$set(n),(!g||4&t)&&y!==(y=e[2].display_name+"")&&q(r,y);const s={};64&t&&(s.$$scope={dirty:t,ctx:e}),a.$set(s);const i={};!d&&8&t&&(d=!0,i.value=e[3],de((()=>d=!1))),u.$set(i);const c={};64&t&&(c.$$scope={dirty:t,ctx:e}),!m&&1&t&&(m=!0,c.value=e[0],de((()=>m=!1))),h.$set(c)},i(e){g||(ke(o.$$.fragment,e),ke(a.$$.fragment,e),ke(u.$$.fragment,e),ke(h.$$.fragment,e),g=!0)},o(e){xe(o.$$.fragment,e),xe(a.$$.fragment,e),xe(u.$$.fragment,e),xe(h.$$.fragment,e),g=!1},d(e){e&&P(t),Re(o),e&&P(i),Re(a,e),e&&P(c),e&&P(l),Re(u),e&&P(f),e&&P(p),Re(h)}}}function us(t){let n,o;return{c(){n=I("iconify-icon"),o=L("\n            Sign in to Twitch"),F(n,"icon","fa-brands:twitch"),F(n,"class","twitch-icon svelte-19ajlrt")},m(e,t){R(e,n,t),R(e,o,t)},p:e,d(e){e&&P(n),e&&P(o)}}}function ds(e){let t;return{c(){t=L("Sign out")},m(e,n){R(e,t,n)},d(e){e&&P(t)}}}function fs(t){let n;return{c(){n=I("iconify-icon"),F(n,"icon","emojione-monotone:exclamation-mark")},m(e,t){R(e,n,t)},p:e,d(e){e&&P(n)}}}function ps(e){let t,n;return t=new Qo({props:{addonLeft:!0,slot:"addonLeft",$$slots:{default:[fs]},$$scope:{ctx:e}}}),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},p(e,n){const o={};64&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o)},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function hs(e){let t,n,o,s,r,i,a,c;const l=[ls,cs],u=[];function d(e,t){return e[1]&&e[2]?0:1}return r=d(e),i=u[r]=l[r](e),{c(){t=I("h2"),t.textContent="Connect Twitch (Optional)",n=N(),o=I("p"),o.textContent="Connect Twitch below if you want a chatbot to respond to a command in chat that responds with information for the current playing song.\nIf you don't need this functionality, do not connect your account here.",s=N(),i.c(),a=D(),M(o,"class","mbe16")},m(e,i){R(e,t,i),R(e,n,i),R(e,o,i),R(e,s,i),u[r].m(e,i),R(e,a,i),c=!0},p(e,[t]){let n=r;r=d(e),r===n?u[r].p(e,t):(we(),xe(u[n],1,1,(()=>{u[n]=null})),$e(),i=u[r],i?i.p(e,t):(i=u[r]=l[r](e),i.c()),ke(i,1),i.m(a.parentNode,a))},i(e){c||(ke(i),c=!0)},o(e){xe(i),c=!1},d(e){e&&P(t),e&&P(n),e&&P(o),e&&P(s),u[r].d(e),e&&P(a)}}}function ms(e,t,n){let o,s,r,i;return f(e,tt,(e=>n(0,o=e))),f(e,et,(e=>n(3,s=e))),f(e,ot,(e=>n(1,r=e))),e.$$.update=()=>{3&e.$$.dirty&&(async e=>e?await In():null)(r).then((e=>{n(2,i=e),w(et,s=(null==e?void 0:e.login)||null,s),w(tt,o=o||"song",o)}))},[o,r,i,s,function(e){s=e,et.set(s)},function(e){o=e,tt.set(o)}]}class gs extends Ie{constructor(e){super(),Pe(this,e,ms,hs,a,{})}}function ys(e){let t;return{c(){t=L("It looks like you are loading this page in OBS. This is now the page that helps you configure the OBS plugin. \n            Please visit this URL in your desktop browser instead.")},m(e,n){R(e,t,n)},d(e){e&&P(t)}}}function bs(e){let t;return{c(){t=L("Generate")},m(e,n){R(e,t,n)},d(e){e&&P(t)}}}function vs(e){let t;return{c(){t=I("textarea"),M(t,"class","mbs8 svelte-1996hot"),t.value=e[0]},m(e,n){R(e,t,n)},p(e,n){1&n&&(t.value=e[0])},d(e){e&&P(t)}}}function _s(e){let t,n,o,s,r,i,a,c,l,u,d,f,p,h,m,g,y,b,v,_,w=navigator.userAgent.match(/\bOBS\b/)&&function(e){let t,n,o;return n=new Xn({props:{type:"warning",$$slots:{default:[ys]},$$scope:{ctx:e}}}),{c(){t=I("div"),Ae(n.$$.fragment),M(t,"class","mbe16")},m(e,s){R(e,t,s),Oe(n,t,null),o=!0},i(e){o||(ke(n.$$.fragment,e),o=!0)},o(e){xe(n.$$.fragment,e),o=!1},d(e){e&&P(t),Re(n)}}}(e);i=new as({}),l=new gs({}),b=new ao({props:{type:"primary",$$slots:{default:[bs]},$$scope:{ctx:e}}}),b.$on("click",e[1]);let $=e[0]&&vs(e);return{c(){t=I("main"),n=I("h1"),n.textContent="Spotify Player Overlay",o=N(),w&&w.c(),s=N(),r=I("section"),Ae(i.$$.fragment),a=N(),c=I("section"),Ae(l.$$.fragment),u=N(),d=I("section"),f=I("h1"),f.textContent="Your Widget URL",p=N(),h=I("p"),h.textContent="Click the button below to generate a widget URL that you can use in your streaming software. \n            You can add this URL as a browser source.",m=N(),g=I("p"),g.textContent="The overlay adapts to the size of your source, so make sure you set the source \n            to the size you need it to be. Avoid scaling the source within OBS since that can create aliasing. \n            A good size to start with is 600x240.",y=N(),Ae(b.$$.fragment),v=N(),$&&$.c(),M(r,"class","mbe16"),M(c,"class","mbe16"),M(f,"class","mbe8"),M(g,"class","mbe8"),M(d,"class","mbe16"),M(t,"class","config-container svelte-1996hot")},m(e,k){R(e,t,k),S(t,n),S(t,o),w&&w.m(t,null),S(t,s),S(t,r),Oe(i,r,null),S(t,a),S(t,c),Oe(l,c,null),S(t,u),S(t,d),S(d,f),S(d,p),S(d,h),S(d,m),S(d,g),S(d,y),Oe(b,d,null),S(d,v),$&&$.m(d,null),_=!0},p(e,[t]){const n={};8&t&&(n.$$scope={dirty:t,ctx:e}),b.$set(n),e[0]?$?$.p(e,t):($=vs(e),$.c(),$.m(d,null)):$&&($.d(1),$=null)},i(e){_||(ke(w),ke(i.$$.fragment,e),ke(l.$$.fragment,e),ke(b.$$.fragment,e),_=!0)},o(e){xe(w),xe(i.$$.fragment,e),xe(l.$$.fragment,e),xe(b.$$.fragment,e),_=!1},d(e){e&&P(t),w&&w.d(),Re(i),Re(l),Re(b),$&&$.d()}}}function ws(e,t,n){let o;f(e,nt,(e=>n(2,o=e)));let s="";return[s,function(){if(o){const e=new URL(window.location.href);e.hash="#widget",e.search=function(){const e=[];for(const t of qe)e.push({key:t,value:localStorage.getItem(t)});return"cf="+Fe.compressToEncodedURIComponent(JSON.stringify(e))}(),n(0,s=e.toString())}else n(0,s="You must sign in to Spotify first.")}]}class $s extends Ie{constructor(e){super(),Pe(this,e,ws,_s,a,{})}}function ks(e){return ee((async()=>{await async function(){const e=new URLSearchParams(location.search);if(history.replaceState(null,"",location.pathname),e.get("state")&&e.get("state")===d(We)){if(We.set(null),!e.has("code"))throw bn(),e.has("error")?e.get("error"):"unknown error";Ve.set(e.get("code")),await yn()}}(),window.close()})),[]}class xs extends Ie{constructor(e){super(),Pe(this,e,ks,null,a,{})}}function Cs(e){return ee((async()=>{await async function(){const e=new URLSearchParams(location.hash.substring(location.hash.indexOf("#",1)+1));if(history.replaceState(null,"",location.pathname),e.get("state")&&e.get("state")===d(Ze)){if(Ze.set(null),!e.has("access_token"))throw Rn(),e.has("error")?e.get("error_description"):"unknown error";Xe.set(e.get("access_token"))}}(),window.close()})),[]}class Es extends Ie{constructor(e){super(),Pe(this,e,Cs,null,a,{})}}
/**
    * (c) Iconify
    *
    * For the full copyright and license information, please view the license.txt
    * files at https://github.com/iconify/iconify
    *
    * Licensed under MIT.
    *
    * @license MIT
    * @version 1.0.0-beta.2
    */const Ts=Object.freeze({left:0,top:0,width:16,height:16}),Ss=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),As=Object.freeze({...Ts,...Ss}),Os=Object.freeze({...As,body:"",hidden:!1}),Rs=Object.freeze({width:null,height:null}),Ps=Object.freeze({...Rs,...Ss});const Is=/[\s,]+/;const js={...Ps,preserveAspectRatio:""};function Ls(e){const t={...js},n=(t,n)=>e.getAttribute(t)||n;var o;return t.width=n("width",null),t.height=n("height",null),t.rotate=function(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function o(e){for(;e<0;)e+=4;return e%4}if(""===n){const t=parseInt(e);return isNaN(t)?0:o(t)}if(n!==e){let t=0;switch(n){case"%":t=25;break;case"deg":t=90}if(t){let s=parseFloat(e.slice(0,e.length-n.length));return isNaN(s)?0:(s/=t,s%1==0?o(s):0)}}return t}(n("rotate","")),o=t,n("flip","").split(Is).forEach((e=>{switch(e.trim()){case"horizontal":o.hFlip=!0;break;case"vertical":o.vFlip=!0}})),t.preserveAspectRatio=n("preserveAspectRatio",n("preserveaspectratio","")),t}const Ns=/^[a-z0-9]+(-[a-z0-9]+)*$/,Ds=(e,t,n,o="")=>{const s=e.split(":");if("@"===e.slice(0,1)){if(s.length<2||s.length>3)return null;o=s.shift().slice(1)}if(s.length>3||!s.length)return null;if(s.length>1){const e=s.pop(),n=s.pop(),r={provider:s.length>0?s[0]:o,prefix:n,name:e};return t&&!Us(r)?null:r}const r=s[0],i=r.split("-");if(i.length>1){const e={provider:o,prefix:i.shift(),name:i.join("-")};return t&&!Us(e)?null:e}if(n&&""===o){const e={provider:o,prefix:"",name:r};return t&&!Us(e,n)?null:e}return null},Us=(e,t)=>!!e&&!(""!==e.provider&&!e.provider.match(Ns)||!(t&&""===e.prefix||e.prefix.match(Ns))||!e.name.match(Ns));function Ms(e,t){const n=function(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(n.rotate=o),n}(e,t);for(const o in Os)void 0!==Ss[o]?void 0===n[o]&&void 0!==e[o]&&(n[o]=Ss[o]):void 0!==t[o]?n[o]=t[o]:void 0!==e[o]&&(n[o]=e[o]);return n}function Bs(e,t,n){const o=e.icons,s=e.aliases||{};let r={};function i(e){r=Ms(o[e]||s[e],r)}return i(t),n.forEach(i),Ms(e,r)}function Fs(e,t){const n=[];if("object"!=typeof e||"object"!=typeof e.icons)return n;e.not_found instanceof Array&&e.not_found.forEach((e=>{t(e,null),n.push(e)}));const o=function(e,t){const n=e.icons,o=e.aliases||{},s=Object.create(null);return(t||Object.keys(n).concat(Object.keys(o))).forEach((function e(t){if(n[t])return s[t]=[];if(void 0===s[t]){s[t]=null;const n=o[t]&&o[t].parent,r=n&&e(n);r&&(s[t]=[n].concat(r))}return s[t]})),s}(e);for(const s in o){const r=o[s];r&&(t(s,Bs(e,s,r)),n.push(s))}return n}const qs={provider:"",aliases:{},not_found:{},...Ts};function zs(e,t){for(const n in t)if(void 0!==e[n]&&typeof e[n]!=typeof t[n])return!1;return!0}function Hs(e){if("object"!=typeof e||null===e)return null;const t=e;if("string"!=typeof t.prefix||!e.icons||"object"!=typeof e.icons)return null;if(!zs(e,qs))return null;const n=t.icons;for(const e in n){const t=n[e];if(!e.match(Ns)||"string"!=typeof t.body||!zs(t,Os))return null}const o=t.aliases||{};for(const e in o){const t=o[e],s=t.parent;if(!e.match(Ns)||"string"!=typeof s||!n[s]&&!o[s]||!zs(t,Os))return null}return t}const Js=Object.create(null);function Gs(e,t){const n=Js[e]||(Js[e]=Object.create(null));return n[t]||(n[t]=function(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}(e,t))}function Ws(e,t){return Hs(t)?Fs(t,((t,n)=>{n?e.icons[t]=n:e.missing.add(t)})):[]}function Vs(e,t){let n=[];return("string"==typeof e?[e]:Object.keys(Js)).forEach((e=>{("string"==typeof e&&"string"==typeof t?[t]:Object.keys(Js[e]||{})).forEach((t=>{const o=Gs(e,t);n=n.concat(Object.keys(o.icons).map((n=>(""!==e?"@"+e+":":"")+t+":"+n)))}))})),n}let Ks=!1;function Qs(e){return"boolean"==typeof e&&(Ks=e),Ks}function Ys(e){const t="string"==typeof e?Ds(e,!0,Ks):e;if(t){const e=Gs(t.provider,t.prefix),n=t.name;return e.icons[n]||(e.missing.has(n)?null:void 0)}}function Xs(e,t){const n=Ds(e,!0,Ks);if(!n)return!1;return function(e,t,n){try{if("string"==typeof n.body)return e.icons[t]={...n},!0}catch(e){}return!1}(Gs(n.provider,n.prefix),n.name,t)}function Zs(e,t){if("object"!=typeof e)return!1;if("string"!=typeof t&&(t="string"==typeof e.provider?e.provider:""),Ks&&""===t&&("string"!=typeof e.prefix||""===e.prefix)){let t=!1;return Hs(e)&&(e.prefix="",Fs(e,((e,n)=>{n&&Xs(e,n)&&(t=!0)}))),t}if("string"!=typeof e.prefix||!Us({provider:t,prefix:e.prefix,name:"a"}))return!1;return!!Ws(Gs(t,e.prefix),e)}function er(e){return!!Ys(e)}function tr(e){const t=Ys(e);return t?{...As,...t}:null}function nr(e,t){e.forEach((e=>{const n=e.loaderCallbacks;n&&(e.loaderCallbacks=n.filter((e=>e.id!==t)))}))}let or=0;const sr=Object.create(null);function rr(e,t){sr[e]=t}function ir(e){return sr[e]||sr[""]}var ar={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function cr(e,t,n,o){const s=e.resources.length,r=e.random?Math.floor(Math.random()*s):e.index;let i;if(e.random){let t=e.resources.slice(0);for(i=[];t.length>1;){const e=Math.floor(Math.random()*t.length);i.push(t[e]),t=t.slice(0,e).concat(t.slice(e+1))}i=i.concat(t)}else i=e.resources.slice(r).concat(e.resources.slice(0,r));const a=Date.now();let c,l="pending",u=0,d=null,f=[],p=[];function h(){d&&(clearTimeout(d),d=null)}function m(){"pending"===l&&(l="aborted"),h(),f.forEach((e=>{"pending"===e.status&&(e.status="aborted")})),f=[]}function g(e,t){t&&(p=[]),"function"==typeof e&&p.push(e)}function y(){l="failed",p.forEach((e=>{e(void 0,c)}))}function b(){f.forEach((e=>{"pending"===e.status&&(e.status="aborted")})),f=[]}function v(){if("pending"!==l)return;h();const o=i.shift();if(void 0===o)return f.length?void(d=setTimeout((()=>{h(),"pending"===l&&(b(),y())}),e.timeout)):void y();const s={status:"pending",resource:o,callback:(t,n)=>{!function(t,n,o){const s="success"!==n;switch(f=f.filter((e=>e!==t)),l){case"pending":break;case"failed":if(s||!e.dataAfterTimeout)return;break;default:return}if("abort"===n)return c=o,void y();if(s)return c=o,void(f.length||(i.length?v():y()));if(h(),b(),!e.random){const n=e.resources.indexOf(t.resource);-1!==n&&n!==e.index&&(e.index=n)}l="completed",p.forEach((e=>{e(o)}))}(s,t,n)}};f.push(s),u++,d=setTimeout(v,e.rotate),n(o,t,s.callback)}return"function"==typeof o&&p.push(o),setTimeout(v),function(){return{startTime:a,payload:t,status:l,queriesSent:u,queriesPending:f.length,subscribe:g,abort:m}}}function lr(e){const t={...ar,...e};let n=[];function o(){n=n.filter((e=>"pending"===e().status))}const s={query:function(e,s,r){const i=cr(t,e,s,((e,t)=>{o(),r&&r(e,t)}));return n.push(i),i},find:function(e){return n.find((t=>e(t)))||null},setIndex:e=>{t.index=e},getIndex:()=>t.index,cleanup:o};return s}function ur(e){let t;if("string"==typeof e.resources)t=[e.resources];else if(t=e.resources,!(t instanceof Array&&t.length))return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:!0===e.random,index:e.index||0,dataAfterTimeout:!1!==e.dataAfterTimeout}}const dr=Object.create(null),fr=["https://api.simplesvg.com","https://api.unisvg.com"],pr=[];for(;fr.length>0;)1===fr.length||Math.random()>.5?pr.push(fr.shift()):pr.push(fr.pop());function hr(e,t){const n=ur(t);return null!==n&&(dr[e]=n,!0)}function mr(e){return dr[e]}function gr(){return Object.keys(dr)}function yr(){}dr[""]=ur({resources:["https://api.iconify.design"].concat(pr)});const br=Object.create(null);function vr(e,t,n){let o,s;if("string"==typeof e){const t=ir(e);if(!t)return n(void 0,424),yr;s=t.send;const r=function(e){if(void 0===br[e]){const t=mr(e);if(!t)return;const n={config:t,redundancy:lr(t)};br[e]=n}return br[e]}(e);r&&(o=r.redundancy)}else{const t=ur(e);if(t){o=lr(t);const n=ir(e.resources?e.resources[0]:"");n&&(s=n.send)}}return o&&s?o.query(t,s,n)().abort:(n(void 0,424),yr)}const _r="iconify2",wr="iconify",$r="iconify-count",kr="iconify-version",xr=36e5;function Cr(e,t){try{return e.getItem(t)}catch(e){}}function Er(e,t,n){try{return e.setItem(t,n),!0}catch(e){}}function Tr(e,t){try{e.removeItem(t)}catch(e){}}function Sr(e,t){return Er(e,$r,t.toString())}function Ar(e){return parseInt(Cr(e,$r))||0}const Or={local:!0,session:!0},Rr={local:new Set,session:new Set};let Pr=!1;let Ir="undefined"==typeof window?{}:window;function jr(e){const t=e+"Storage";try{if(Ir&&Ir[t]&&"number"==typeof Ir[t].length)return Ir[t]}catch(e){}Or[e]=!1}function Lr(e,t){const n=jr(e);if(!n)return;const o=Cr(n,kr);if(o!==_r){if(o){const e=Ar(n);for(let t=0;t<e;t++)Tr(n,wr+t.toString())}return Er(n,kr,_r),void Sr(n,0)}const s=Math.floor(Date.now()/xr)-168,r=e=>{const o=wr+e.toString(),r=Cr(n,o);if("string"==typeof r){try{const n=JSON.parse(r);if("object"==typeof n&&"number"==typeof n.cached&&n.cached>s&&"string"==typeof n.provider&&"object"==typeof n.data&&"string"==typeof n.data.prefix&&t(n,e))return!0}catch(e){}Tr(n,o)}};let i=Ar(n);for(let t=i-1;t>=0;t--)r(t)||(t===i-1?(i--,Sr(n,i)):Rr[e].add(t))}function Nr(){if(!Pr){Pr=!0;for(const e in Or)Lr(e,(e=>{const t=e.data,n=Gs(e.provider,t.prefix);if(!Ws(n,t).length)return!1;const o=t.lastModified||-1;return n.lastModifiedCached=n.lastModifiedCached?Math.min(n.lastModifiedCached,o):o,!0}))}}function Dr(e,t){function n(n){let o;if(!Or[n]||!(o=jr(n)))return;const s=Rr[n];let r;if(s.size)s.delete(r=Array.from(s).shift());else if(r=Ar(o),!Sr(o,r+1))return;const i={cached:Math.floor(Date.now()/xr),provider:e.provider,data:t};return Er(o,wr+r.toString(),JSON.stringify(i))}Pr||Nr(),t.lastModified&&!function(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const n in Or)Lr(n,(n=>{const o=n.data;return n.provider!==e.provider||o.prefix!==e.prefix||o.lastModified===t}));return!0}(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&delete(t=Object.assign({},t)).not_found,n("local")||n("session"))}function Ur(){}function Mr(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout((()=>{e.iconsLoaderFlag=!1,function(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout((()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const o=e.provider,s=e.prefix;t.forEach((t=>{const r=t.icons,i=r.pending.length;r.pending=r.pending.filter((t=>{if(t.prefix!==s)return!0;const i=t.name;if(void 0!==e.icons[i])r.loaded.push({provider:o,prefix:s,name:i});else{if(!e.missing.has(i))return n=!0,!0;r.missing.push({provider:o,prefix:s,name:i})}return!1})),r.pending.length!==i&&(n||nr([e],t.id),t.callback(r.loaded.slice(0),r.missing.slice(0),r.pending.slice(0),t.abort))}))})))}(e)})))}const Br=(e,t)=>{const n=function(e,t=!0,n=!1){const o=[];return e.forEach((e=>{const s="string"==typeof e?Ds(e,t,n):{...e};s&&o.push(s)})),o}(e,!0,Qs()),o=function(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort(((e,t)=>e.provider!==t.provider?e.provider.localeCompare(t.provider):e.prefix!==t.prefix?e.prefix.localeCompare(t.prefix):e.name.localeCompare(t.name)));let o={provider:"",prefix:"",name:""};return e.forEach((e=>{if(o.name===e.name&&o.prefix===e.prefix&&o.provider===e.provider)return;o=e;const s=e.provider,r=e.prefix,i=e.name;void 0===n[s]&&(n[s]=Object.create(null));const a=n[s];void 0===a[r]&&(a[r]=Gs(s,r));const c=a[r];let l;l=void 0!==c.icons[i]?t.loaded:""===r||c.missing.has(i)?t.missing:t.pending;const u={provider:s,prefix:r,name:i};l.push(u)})),t}(n);if(!o.pending.length){let e=!0;return t&&setTimeout((()=>{e&&t(o.loaded,o.missing,o.pending,Ur)})),()=>{e=!1}}const s=Object.create(null),r=[];let i,a;return o.pending.forEach((e=>{const{provider:t,prefix:n}=e;if(n===a&&t===i)return;i=t,a=n,r.push(Gs(t,n));const o=s[t]||(s[t]=Object.create(null));o[n]||(o[n]=[])})),o.pending.forEach((e=>{const{provider:t,prefix:n,name:o}=e,r=Gs(t,n),i=r.pendingIcons||(r.pendingIcons=new Set);i.has(o)||(i.add(o),s[t][n].push(o))})),r.forEach((e=>{const{provider:t,prefix:n}=e;s[t][n].length&&function(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout((()=>{e.iconsQueueFlag=!1;const{provider:t,prefix:n}=e,o=e.iconsToLoad;let s;delete e.iconsToLoad,o&&(s=ir(t))&&s.prepare(t,n,o).forEach((n=>{vr(t,n,((t,o)=>{if("object"!=typeof t){if(404!==o)return;n.icons.forEach((t=>{e.missing.add(t)}))}else try{const n=Ws(e,t);if(!n.length)return;const o=e.pendingIcons;o&&n.forEach((e=>{o.delete(e)})),Dr(e,t)}catch(e){console.error(e)}Mr(e)}))}))})))}(e,s[t][n])})),t?function(e,t,n){const o=or++,s=nr.bind(null,n,o);if(!t.pending.length)return s;const r={id:o,icons:t,callback:e,abort:s};return n.forEach((e=>{(e.loaderCallbacks||(e.loaderCallbacks=[])).push(r)})),s}(t,o,r):Ur},Fr=e=>new Promise(((t,n)=>{const o="string"==typeof e?Ds(e):e;Br([o||e],(s=>{if(s.length&&o){const e=Ys(o);if(e)return void t({...As,...e})}n(e)}))}));function qr(e,t){const n="string"==typeof e?Ds(e,!0,!0):null;if(!n){const t=function(e){try{const t="string"==typeof e?JSON.parse(e):e;if("string"==typeof t.body)return{...t}}catch(e){}}(e);return{value:e,data:t}}const o=Ys(n);if(void 0!==o||!n.prefix)return{value:e,name:n,data:o};const s=Br([n],(()=>t(e,n,Ys(n))));return{value:e,name:n,loading:s}}function zr(e){return e.hasAttribute("inline")}let Hr=!1;try{Hr=0===navigator.vendor.indexOf("Apple")}catch(e){}const Jr=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Gr=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Wr(e,t,n){if(1===t)return e;if(n=void 0===n?100:n,"number"==typeof e)return Math.ceil(e*t*n)/n;if("string"!=typeof e)return e;const o=e.split(Jr);if(null===o||!o.length)return e;const s=[];let r=o.shift(),i=Gr.test(r);for(;;){if(i){const e=parseFloat(r);isNaN(e)?s.push(r):s.push(Math.ceil(e*t*n)/n)}else s.push(r);if(r=o.shift(),void 0===r)return s.join("");i=!i}}function Vr(e,t){const n={...As,...e},o={...Ps,...t},s={left:n.left,top:n.top,width:n.width,height:n.height};let r=n.body;[n,o].forEach((e=>{const t=[],n=e.hFlip,o=e.vFlip;let i,a=e.rotate;switch(n?o?a+=2:(t.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),t.push("scale(-1 1)"),s.top=s.left=0):o&&(t.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),t.push("scale(1 -1)"),s.top=s.left=0),a<0&&(a-=4*Math.floor(a/4)),a%=4,a){case 1:i=s.height/2+s.top,t.unshift("rotate(90 "+i.toString()+" "+i.toString()+")");break;case 2:t.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:i=s.width/2+s.left,t.unshift("rotate(-90 "+i.toString()+" "+i.toString()+")")}a%2==1&&(s.left!==s.top&&(i=s.left,s.left=s.top,s.top=i),s.width!==s.height&&(i=s.width,s.width=s.height,s.height=i)),t.length&&(r='<g transform="'+t.join(" ")+'">'+r+"</g>")}));const i=o.width,a=o.height,c=s.width,l=s.height;let u,d;null===i?(d=null===a?"1em":"auto"===a?l:a,u=Wr(d,c/l)):(u="auto"===i?c:i,d=null===a?Wr(u,l/c):"auto"===a?l:a);return{attributes:{width:u.toString(),height:d.toString(),viewBox:s.left.toString()+" "+s.top.toString()+" "+c.toString()+" "+l.toString()},body:r}}let Kr=(()=>{let e;try{if(e=fetch,"function"==typeof e)return e}catch(e){}})();function Qr(e){Kr=e}function Yr(){return Kr}const Xr={prepare:(e,t,n)=>{const o=[],s=function(e,t){const n=mr(e);if(!n)return 0;let o;if(n.maxURL){let e=0;n.resources.forEach((t=>{const n=t;e=Math.max(e,n.length)}));const s=t+".json?icons=";o=n.maxURL-e-n.path.length-s.length}else o=0;return o}(e,t),r="icons";let i={type:r,provider:e,prefix:t,icons:[]},a=0;return n.forEach(((n,c)=>{a+=n.length+1,a>=s&&c>0&&(o.push(i),i={type:r,provider:e,prefix:t,icons:[]},a=n.length),i.icons.push(n)})),o.push(i),o},send:(e,t,n)=>{if(!Kr)return void n("abort",424);let o=function(e){if("string"==typeof e){const t=mr(e);if(t)return t.path}return"/"}(t.provider);switch(t.type){case"icons":{const e=t.prefix,n=t.icons.join(",");o+=e+".json?"+new URLSearchParams({icons:n}).toString();break}case"custom":{const e=t.uri;o+="/"===e.slice(0,1)?e.slice(1):e;break}default:return void n("abort",400)}let s=503;Kr(e+o).then((e=>{const t=e.status;if(200===t)return s=501,e.json();setTimeout((()=>{n(function(e){return 404===e}(t)?"abort":"next",t)}))})).then((e=>{"object"==typeof e&&null!==e?setTimeout((()=>{n("success",e)})):setTimeout((()=>{n("next",s)}))})).catch((()=>{n("next",s)}))}};function Zr(e,t){switch(e){case"local":case"session":Or[e]=t;break;case"all":for(const e in Or)Or[e]=t}}function ei(){let e;rr("",Xr),Qs(!0);try{e=window}catch(e){}if(e){if(Nr(),void 0!==e.IconifyPreload){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";"object"==typeof t&&null!==t&&(t instanceof Array?t:[t]).forEach((e=>{try{("object"!=typeof e||null===e||e instanceof Array||"object"!=typeof e.icons||"string"!=typeof e.prefix||!Zs(e))&&console.error(n)}catch(e){console.error(n)}}))}if(void 0!==e.IconifyProviders){const t=e.IconifyProviders;if("object"==typeof t&&null!==t)for(const e in t){const n="IconifyProviders["+e+"] is invalid.";try{const o=t[e];if("object"!=typeof o||!o||void 0===o.resources)continue;hr(e,o)||console.error(n)}catch(e){console.error(n)}}}}return{enableCache:e=>Zr(e,!0),disableCache:e=>Zr(e,!1),iconExists:er,getIcon:tr,listIcons:Vs,addIcon:Xs,addCollection:Zs,calculateSize:Wr,buildIcon:Vr,loadIcons:Br,loadIcon:Fr,addAPIProvider:hr,_api:{getAPIConfig:mr,setAPIModule:rr,sendAPIQuery:vr,setFetch:Qr,getFetch:Yr,listAPIProviders:gr}}}function ti(e,t){let n=-1===e.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const e in t)n+=" "+e+'="'+t[e]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}const ni={"background-color":"currentColor"},oi={"background-color":"transparent"},si={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},ri={"-webkit-mask":ni,mask:ni,background:oi};for(const e in ri){const t=ri[e];for(const n in si)t[e+"-"+n]=si[n]}function ii(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}function ai(e,t){const n=t.icon.data,o=t.customisations,s=Vr(n,o);o.preserveAspectRatio&&(s.attributes.preserveAspectRatio=o.preserveAspectRatio);const r=t.renderedMode;let i;if("svg"===r)i=function(e){const t=document.createElement("span");return t.innerHTML=ti(e.body,e.attributes),t.firstChild}(s);else i=function(e,t,n){const o=document.createElement("span");let s=e.body;-1!==s.indexOf("<a")&&(s+="\x3c!-- "+Date.now()+" --\x3e");const r=e.attributes,i='url("data:image/svg+xml,'+(l=ti(s,{...r,width:t.width+"",height:t.height+""}),l.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")+'")'),a=o.style,c={"--svg":i,width:ii(r.width),height:ii(r.height),...n?ni:oi};var l;for(const e in c)a.setProperty(e,c[e]);return o}(s,{...As,...n},"mask"===r);if(e.childNodes.length>1){const t=e.lastChild;"SPAN"===i.tagName&&t.tagName===i.tagName?t.setAttribute("style",i.getAttribute("style")):e.replaceChild(i,t)}else e.appendChild(i)}function ci(e,t){let n=e.firstChild;n||(n=document.createElement("style"),e.appendChild(n)),n.textContent=":host{display:inline-block;vertical-align:"+(t?"-0.125em":"0")+"}span,svg{display:block}"}function li(e,t,n){return{rendered:!1,inline:t,icon:e,lastRender:n&&(n.rendered?n:n.lastRender)}}function ui(e){let t,n;return t=new $s({}),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function di(e){let t,n;return t=new Wn({}),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function fi(e){let t,n;return t=new Es({}),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function pi(e){let t,n;return t=new xs({}),{c(){Ae(t.$$.fragment)},m(e,o){Oe(t,e,o),n=!0},i(e){n||(ke(t.$$.fragment,e),n=!0)},o(e){xe(t.$$.fragment,e),n=!1},d(e){Re(t,e)}}}function hi(e){let t,n,o,s;const r=[pi,fi,di,ui],i=[];function a(e,t){return"#spotify"==e[0]?0:"#twitch"==e[0]?1:"#widget"==e[0]?2:3}return t=a(e),n=i[t]=r[t](e),{c(){n.c(),o=D()},m(e,n){i[t].m(e,n),R(e,o,n),s=!0},p(e,[s]){let c=t;t=a(e),t!==c&&(we(),xe(i[c],1,1,(()=>{i[c]=null})),$e(),n=i[t],n||(n=i[t]=r[t](e),n.c()),ke(n,1),n.m(o.parentNode,o))},i(e){s||(ke(n),s=!0)},o(e){xe(n),s=!1},d(e){i[t].d(e),e&&P(o)}}}function mi(e,t,n){let o;var s;return ee((()=>{!function(){const e=new URLSearchParams(location.search).get("cf");if(e){const t=JSON.parse(Fe.decompressFromEncodedURIComponent(e));for(const e of t)localStorage.setItem(e.key,e.value);window.location.search=null}}()})),e.$$.update=()=>{2&e.$$.dirty&&n(0,o=(null===n(1,s=window.location.hash.match(/^#(\w+)/))||void 0===s?void 0:s[0])||"")},[o,s]}(function(e="iconify-icon"){let t,n;try{t=window.customElements,n=window.HTMLElement}catch(e){return}if(!t||!n)return;const o=t.get(e);if(o)return o;const s=["icon","mode","inline","width","height","rotate","flip"],r=class extends n{_shadowRoot;_state;_checkQueued=!1;constructor(){super();const e=this._shadowRoot=this.attachShadow({mode:"closed"}),t=zr(this);ci(e,t),this._state=li({value:""},t),this._queueCheck()}static get observedAttributes(){return s.slice(0)}attributeChangedCallback(e){if("inline"===e){const e=zr(this),t=this._state;e!==t.inline&&(t.inline=e,ci(this._shadowRoot,e))}else this._queueCheck()}get icon(){const e=this.getAttribute("icon");if(e&&"{"===e.slice(0,1))try{return JSON.parse(e)}catch(e){}return e}set icon(e){"object"==typeof e&&(e=JSON.stringify(e)),this.setAttribute("icon",e)}get inline(){return zr(this)}set inline(e){this.setAttribute("inline",e?"true":null)}restartAnimation(){const e=this._state;if(e.rendered){const t=this._shadowRoot;if("svg"===e.renderedMode)try{return void t.lastChild.setCurrentTime(0)}catch(e){}ai(t,e)}}get status(){const e=this._state;return e.rendered?"rendered":null===e.icon.data?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout((()=>{this._check()})))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const e=this._state,t=this.getAttribute("icon");if(t!==e.icon.value)return void this._iconChanged(t);if(!e.rendered)return;const n=this.getAttribute("mode"),o=Ls(this);(e.attrMode!==n||function(e,t){for(const n in js)if(e[n]!==t[n])return!0;return!1}(e.customisations,o))&&this._renderIcon(e.icon,o,n)}_iconChanged(e){const t=qr(e,((e,t,n)=>{const o=this._state;if(o.rendered||this.getAttribute("icon")!==e)return;const s={value:e,name:t,data:n};s.data?this._gotIconData(s):o.icon=s}));t.data?this._gotIconData(t):this._state=li(t,this._state.inline,this._state)}_gotIconData(e){this._checkQueued=!1,this._renderIcon(e,Ls(this),this.getAttribute("mode"))}_renderIcon(e,t,n){const o=function(e,t){switch(t){case"svg":case"bg":case"mask":return t}return"style"===t||!Hr&&-1!==e.indexOf("<a")?-1===e.indexOf("currentColor")?"bg":"mask":"svg"}(e.data.body,n),s=this._state.inline;ai(this._shadowRoot,this._state={rendered:!0,icon:e,inline:s,customisations:t,attrMode:n,renderedMode:o})}};s.forEach((e=>{Object.hasOwn(r.prototype,e)||Object.defineProperty(r.prototype,e,{get:function(){return this.getAttribute(e)},set:function(t){this.setAttribute(e,t)}})}));const i=ei();for(const e in i)r[e]=r.prototype[e]=i[e];return t.define(e,r),r})()||ei();return new class extends Ie{constructor(e){super(),Pe(this,e,mi,hi,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
